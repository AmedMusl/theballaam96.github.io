<!DOCTYPE html>
<html>
<head>
	<title>Object Script Editor</title>
	<style>
		body {
			background-color: antiquewhite;
		}
		.back {
			display: flex;
		}
		.viewbox {
			background-color: white;
			border: 2px solid black;
			height: inherit;
			overflow: scroll;
		}
		.viewbox-container {
			flex: 1;
			height: 450px;
			padding: 10px;
		}
		.scrollbox {
			padding: 10px;
			padding-left: 20px;
			overflow: scroll;
		}
		.map-item {
			padding: 2px;
			transition: 0.5s ease-in-out;
			cursor: pointer;
		}
		.map-item:hover, .viewed-index {
			background-color: #eee;
		}
		.file-input-container {
			background-color: white;
			border: 2px solid black;
			padding: 10px;
			padding-left: 15px;
		}
		.c-highlight {
			background-color: rgba(128,0,0,0.5);
		}
		.error-highlight {
			color: red;
		}
	</style>
</head>
<body>
	<div class="back">
		<div class="viewbox-container">
			<div class="viewbox" id="numeric_editor" style="width:100%" onkeyup="liveUpdate()" contenteditable="true">

			</div>
		</div>
		<div class="viewbox-container">
			<div class="viewbox" id="c_comparison">

			</div>
		</div>
	</div>
	<div class="back">
		<div class="viewbox-container">
			<div class="file-input-container">
				<strong>Raw Script File:</strong>
				<input type="file" id="file-selector" accept=".raw, .bin"/>
			</div>
			<div class="file-input-container" style="height:200px;margin-top:10px;overflow:scroll;" id="error_list"></div>
			<div>
				<div>	
					<button onclick="numericToJSON()">
						Save Script to session
					</button>
					<button onclick="saveArrayToFile()">
						Save map scripts to PC
					</button>
				</div>
				<div>
					Highlight associated C Line
					<input type="checkbox" checked="true" id="show_c_highlight_checkbox">
				</div>
				<div>
					Auto-Indent Script Commands
					<input type="checkbox" checked="true" id="indent_num" onclick="updateLineHovering()">
				</div>
			</div>
		</div>
		<div class="viewbox-container">
			<div class="viewbox scrollbox" id="map-select">

			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script type="text/javascript">
		var file_bytes = []
		var viewed_file = -1;

		maps = [
			"Test Map", // 0
			"Funky's Store",
			"DK Arcade",
			"K. Rool Barrel: Lanky's Maze",
			"Jungle Japes: Mountain",
			"Cranky's Lab",
			"Jungle Japes: Minecart",
			"Jungle Japes",
			"Jungle Japes: Army Dillo",
			"Jetpac",
			"Kremling Kosh! (very easy)", // 10
			"Stealthy Snoop! (normal, no logo)",
			"Jungle Japes: Shell",
			"Jungle Japes: Lanky's Cave",
			"Angry Aztec: Beetle Race",
			"Snide's H.Q.",
			"Angry Aztec: Tiny's Temple",
			"Hideout Helm",
			"Teetering Turtle Trouble! (very easy)",
			"Angry Aztec: Five Door Temple (DK)",
			"Angry Aztec: Llama Temple", // 20
			"Angry Aztec: Five Door Temple (Diddy)",
			"Angry Aztec: Five Door Temple (Tiny)",
			"Angry Aztec: Five Door Temple (Lanky)",
			"Angry Aztec: Five Door Temple (Chunky)",
			"Candy's Music Shop",
			"Frantic Factory",
			"Frantic Factory: Car Race",
			"Hideout Helm (Level Intros, Game Over)",
			"Frantic Factory: Power Shed",
			"Gloomy Galleon", // 30
			"Gloomy Galleon: K. Rool's Ship",
			"Batty Barrel Bandit! (easy)",
			"Jungle Japes: Chunky's Cave",
			"DK Isles Overworld",
			"K. Rool Barrel: DK's Target Game",
			"Frantic Factory: Crusher Room",
			"Jungle Japes: Barrel Blast",
			"Angry Aztec",
			"Gloomy Galleon: Seal Race",
			"Nintendo Logo", // 40
			"Angry Aztec: Barrel Blast",
			"Troff 'n' Scoff", // 42
			"Gloomy Galleon: Shipwreck (Diddy, Lanky, Chunky)",
			"Gloomy Galleon: Treasure Chest",
			"Gloomy Galleon: Mermaid",
			"Gloomy Galleon: Shipwreck (DK, Tiny)",
			"Gloomy Galleon: Shipwreck (Lanky, Tiny)",
			"Fungi Forest",
			"Gloomy Galleon: Lighthouse",
			"K. Rool Barrel: Tiny's Mushroom Game", // 50
			"Gloomy Galleon: Mechanical Fish",
			"Fungi Forest: Ant Hill",
			"Battle Arena: Beaver Brawl!",
			"Gloomy Galleon: Barrel Blast",
			"Fungi Forest: Minecart",
			"Fungi Forest: Diddy's Barn",
			"Fungi Forest: Diddy's Attic",
			"Fungi Forest: Lanky's Attic",
			"Fungi Forest: DK's Barn",
			"Fungi Forest: Spider", // 60
			"Fungi Forest: Front Part of Mill",
			"Fungi Forest: Rear Part of Mill",
			"Fungi Forest: Mushroom Puzzle",
			"Fungi Forest: Giant Mushroom",
			"Stealthy Snoop! (normal)",
			"Mad Maze Maul! (hard)",
			"Stash Snatch! (normal)",
			"Mad Maze Maul! (easy)",
			"Mad Maze Maul! (normal)", // 69
			"Fungi Forest: Mushroom Leap", // 70
			"Fungi Forest: Shooting Game",
			"Crystal Caves",
			"Battle Arena: Kritter Karnage!",
			"Stash Snatch! (easy)",
			"Stash Snatch! (hard)",
			"DK Rap",
			"Minecart Mayhem! (easy)", // 77
			"Busy Barrel Barrage! (easy)",
			"Busy Barrel Barrage! (normal)",
			"Main Menu", // 80
			"Title Screen (Not For Resale Version)",
			"Crystal Caves: Beetle Race",
			"Fungi Forest: Dogadon",
			"Crystal Caves: Igloo (Tiny)",
			"Crystal Caves: Igloo (Lanky)",
			"Crystal Caves: Igloo (DK)",
			"Creepy Castle",
			"Creepy Castle: Ballroom",
			"Crystal Caves: Rotating Room",
			"Crystal Caves: Shack (Chunky)", // 90
			"Crystal Caves: Shack (DK)",
			"Crystal Caves: Shack (Diddy, middle part)",
			"Crystal Caves: Shack (Tiny)",
			"Crystal Caves: Lanky's Hut",
			"Crystal Caves: Igloo (Chunky)",
			"Splish-Splash Salvage! (normal)",
			"K. Lumsy",
			"Crystal Caves: Ice Castle",
			"Speedy Swing Sortie! (easy)",
			"Crystal Caves: Igloo (Diddy)", // 100
			"Krazy Kong Klamour! (easy)",
			"Big Bug Bash! (very easy)",
			"Searchlight Seek! (very easy)",
			"Beaver Bother! (easy)",
			"Creepy Castle: Tower",
			"Creepy Castle: Minecart",
			"Kong Battle: Battle Arena",
			"Creepy Castle: Crypt (Lanky, Tiny)",
			"Kong Battle: Arena 1",
			"Frantic Factory: Barrel Blast", // 110
			"Gloomy Galleon: Pufftoss",
			"Creepy Castle: Crypt (DK, Diddy, Chunky)",
			"Creepy Castle: Museum",
			"Creepy Castle: Library",
			"Kremling Kosh! (easy)",
			"Kremling Kosh! (normal)",
			"Kremling Kosh! (hard)",
			"Teetering Turtle Trouble! (easy)",
			"Teetering Turtle Trouble! (normal)",
			"Teetering Turtle Trouble! (hard)", // 120
			"Batty Barrel Bandit! (easy)",
			"Batty Barrel Bandit! (normal)",
			"Batty Barrel Bandit! (hard)",
			"Mad Maze Maul! (insane)",
			"Stash Snatch! (insane)",
			"Stealthy Snoop! (very easy)",
			"Stealthy Snoop! (easy)",
			"Stealthy Snoop! (hard)",
			"Minecart Mayhem! (normal)",
			"Minecart Mayhem! (hard)", // 130
			"Busy Barrel Barrage! (hard)",
			"Splish-Splash Salvage! (hard)",
			"Splish-Splash Salvage! (easy)",
			"Speedy Swing Sortie! (normal)",
			"Speedy Swing Sortie! (hard)",
			"Beaver Bother! (normal)",
			"Beaver Bother! (hard)",
			"Searchlight Seek! (easy)",
			"Searchlight Seek! (normal)",
			"Searchlight Seek! (hard)", // 140
			"Krazy Kong Klamour! (normal)",
			"Krazy Kong Klamour! (hard)",
			"Krazy Kong Klamour! (insane)",
			"Peril Path Panic! (very easy)",
			"Peril Path Panic! (easy)",
			"Peril Path Panic! (normal)",
			"Peril Path Panic! (hard)",
			"Big Bug Bash! (easy)",
			"Big Bug Bash! (normal)",
			"Big Bug Bash! (hard)", // 150
			"Creepy Castle: Dungeon",
			"Hideout Helm (Intro Story)",
			"DK Isles (DK Theatre)",
			"Frantic Factory: Mad Jack",
			"Battle Arena: Arena Ambush!",
			"Battle Arena: More Kritter Karnage!",
			"Battle Arena: Forest Fracas!",
			"Battle Arena: Bish Bash Brawl!",
			"Battle Arena: Kamikaze Kremlings!",
			"Battle Arena: Plinth Panic!", // 160
			"Battle Arena: Pinnacle Palaver!",
			"Battle Arena: Shockwave Showdown!",
			"Creepy Castle: Basement",
			"Creepy Castle: Tree",
			"K. Rool Barrel: Diddy's Kremling Game",
			"Creepy Castle: Chunky's Toolshed",
			"Creepy Castle: Trash Can",
			"Creepy Castle: Greenhouse",
			"Jungle Japes Lobby",
			"Hideout Helm Lobby", // 170
			"DK's House",
			"Rock (Intro Story)",
			"Angry Aztec Lobby",
			"Gloomy Galleon Lobby",
			"Frantic Factory Lobby",
			"Training Grounds",
			"Dive Barrel",
			"Fungi Forest Lobby",
			"Gloomy Galleon: Submarine",
			"Orange Barrel", // 180
			"Barrel Barrel",
			"Vine Barrel",
			"Creepy Castle: Crypt",
			"Enguarde Arena",
			"Creepy Castle: Car Race",
			"Crystal Caves: Barrel Blast",
			"Creepy Castle: Barrel Blast",
			"Fungi Forest: Barrel Blast",
			"Fairy Island",
			"Kong Battle: Arena 2", // 190
			"Rambi Arena",
			"Kong Battle: Arena 3",
			"Creepy Castle Lobby",
			"Crystal Caves Lobby",
			"DK Isles: Snide's Room",
			"Crystal Caves: Army Dillo",
			"Angry Aztec: Dogadon",
			"Training Grounds (End Sequence)",
			"Creepy Castle: King Kut Out",
			"Crystal Caves: Shack (Diddy, upper part)", // 200
			"K. Rool Barrel: Diddy's Rocketbarrel Game",
			"K. Rool Barrel: Lanky's Shooting Game",
			"K. Rool Fight: DK Phase",
			"K. Rool Fight: Diddy Phase",
			"K. Rool Fight: Lanky Phase",
			"K. Rool Fight: Tiny Phase",
			"K. Rool Fight: Chunky Phase",
			"Bloopers Ending",
			"K. Rool Barrel: Chunky's Hidden Kremling Game",
			"K. Rool Barrel: Tiny's Pony Tail Twirl Game", // 210
			"K. Rool Barrel: Chunky's Shooting Game",
			"K. Rool Barrel: DK's Rambi Game",
			"K. Lumsy Ending",
			"K. Rool's Shoe",
			"K. Rool's Arena", // 215
			"UNKNOWN 216",
			"UNKNOWN 217",
			"UNKNOWN 218",
			"UNKNOWN 219",
			"UNKNOWN 220",
			"UNKNOWN 221",
		];

		function hex(val) {
			return "0x" + val.toString(16).toUpperCase()
		}

		function str(val) {
			return val.toString()
		}

		function len(arr) {
			return arr.length;
		}

		function showCLines(idx) {
			if (document.getElementById("show_c_highlight_checkbox").checked) {
				var rel_c = document.getElementsByClassName("assoc-line-" + idx.toString())
				for (let c = 0; c < rel_c.length; c++) {
					rel_c[c].classList.add("c-highlight")
				}
				var rel_num = document.getElementsByClassName("line" + idx.toString())
				for (let n = 0; n < rel_num.length; n++) {
					rel_num[n].classList.add("c-highlight")
				}
			}
		}

		function clearCLines(idx) {
			var rel_c = document.getElementsByClassName("assoc-line-" + idx.toString())
			for (let c = 0; c < rel_c.length; c++) {
				rel_c[c].classList.remove("c-highlight")
			}
			var rel_num = document.getElementsByClassName("line" + idx.toString())
			for (let n = 0; n < rel_num.length; n++) {
				rel_num[n].classList.remove("c-highlight")
			}
		}

		function updateLineHovering() {
			$(function(){
			    $('div[contentEditable="true"]').each(function(){
			       var text = $(this).clone().children().remove().end().text();// get text
			       var $children = $(this).children();// get children

			       //add text and children again
			       if (text != "") {
			       	$(this).empty().append('<div>'+text+'</div>').append($children);
			       }
			    });
			});
			var hook = document.getElementById("numeric_editor")
			var children = hook.childNodes
			var current_num_indent = 0;
			var indent = document.getElementById("indent_num").checked
			//console.log(indent)
			for (let c = 0; c < children.length; c++) {
				var focused_child = hook.childNodes[c];
				if (focused_child) {
					var pad = current_num_indent * 30;
					if (indent) {
						focused_child.style["padding-left"] = pad.toString() + "px"
					} else {
						focused_child.style["padding-left"] = 0
					}
					if (focused_child.innerText.substring(0,4).toLowerCase() == "cond") {
						current_num_indent++;
					} else if (focused_child.innerText.toLowerCase() == "endblock") {
						current_num_indent = 0;
					}
					focused_child.removeAttribute("class")
					focused_child.classList.add("line" + c.toString())
					focused_child.classList.add("numline")
					focused_child.setAttribute("onmouseover","showCLines(" + c + ")")
					focused_child.setAttribute("onmouseout","clearCLines(" + c + ")")
				}
			}
		}

		function convertScriptLine(json) {
			string = "";
			var has_params = false;
			if (json.type == "condition") {
				if (json.func & 0x8000) {
					string += "CONDINV "
				} else {
					string += "COND "
				}
				string += (json.func & 0x7FFF) + " | "
				has_params = true;
			} else if (json.type == "execution") {
				string += "EXEC " + json.func + " | "
				has_params = true;
			} else if (json.type == "endblock") {
				string += "ENDBLOCK"
			}
			
			if (has_params) {
				json.params.forEach((item, index) => {
					string += item
					if (index < 2) {
						string += " "
					}
				})
			}
			string += "\n"
			return string
		}

		function intToArr(val,size) {
			ret = []
			for (let a = 0; a < size; a++) {
				ret.push(0)
			}
			left = val;
			idx = size - 1;
			while (idx > -1) {
				ret[idx] = left % 256;
				left = (left - ret[idx]) / 256;
				idx -= 1;
				if (idx == -1) {
					break;
				} else if (left == 0) {
					break;
				}
			}
			return ret.slice()
		}

		var new_file = []
		function saveArrayToFile() {
			numericToJSON();
			var script_count = scripts.length;
			new_file = [];
			intToArr(script_count,2).forEach(byte => {new_file.push(byte)})
			scripts.forEach(item => {
				script_list = item.script.slice();
				var blocks = [];
				var current_block = [];
				script_list.forEach(item2 => {
					if (item2.type == "condition" || item2.type == "execution") {
						current_block.push(item2)
					} else if (item2.type == "endblock") {
						if (current_block.length > 0) {
							blocks.push(current_block)
						}
						current_block = [];
					}
				})
				var block_count = blocks.length
				intToArr(item.id,2).forEach(byte => {new_file.push(byte)})
				intToArr(block_count,2).forEach(byte => {new_file.push(byte)})
				intToArr(item.behav_9C,2).forEach(byte => {new_file.push(byte)})
				blocks.forEach(block => {
					conditions = block.filter(item2 => item2.type == "condition")
					condition_count = conditions.length;
					intToArr(condition_count,2).forEach(byte => {new_file.push(byte)})
					if (condition_count > 0) {
						conditions.forEach(condition => {
							intToArr(condition.func,2).forEach(byte => {new_file.push(byte)})
							condition.params.forEach(param => {
								intToArr(param,2).forEach(byte => {new_file.push(byte)})
							})
						})
					}
					executions = block.filter(item2 => item2.type == "execution")
					execution_count = executions.length;
					intToArr(execution_count,2).forEach(byte => {new_file.push(byte)})
					if (execution_count > 0) {
						executions.forEach(execution => {
							intToArr(execution.func,2).forEach(byte => {new_file.push(byte)})
							execution.params.forEach(param => {
								intToArr(param,2).forEach(byte => {new_file.push(byte)})
							})
						})
					}
				})
			})
			length = new_file.length;
			to_add = length % 16
			if (to_add > 0) {
				to_add = 16 - to_add
				for (let t = 0; t < to_add; t++) {
					new_file.push(0)
				}
			}
			writeToFile();
			//console.log(new_file)
		}

		function liveUpdate() {
			var text = document.getElementById("numeric_editor").innerText
			var lines = text.split("\n").filter(item => item != "")
			var success = true;
			var can_update = true;
			var errors = []
			var cond_count = 0;
			var exec_count = 0;
			var lines_with_errors = [];
			lines.forEach((line, index) => {
				var pars = line.split(" ")
				var line_idx = (index + 1).toString();
				if (pars[0] == "COND" || pars[0] == "CONDINV") {
					cond_count += 1;
					if (exec_count > 0) {
						success = false;
						can_update = false;
						errors.push("[CRITICAL] Condition occurs after execution before ENDBLOCK on line " + line_idx)
						lines_with_errors.push(index)
					}
				}
				if (pars[0] == "EXEC") {
					exec_count += 1;
				}
				if (pars[0] == "ENDBLOCK") {
					if (exec_count == 0) {
						success = false;
						can_update = true;
						errors.push("Endblock occurs on line " + line_idx + " without an execution, rendering this condition useless")
						lines_with_errors.push(index)
					}
					cond_count = 0;
					exec_count = 0;
				} else {
					var has_nan = isNaN(parseInt(pars[1]));
					if (has_nan) {
						success = false;
						can_update = false;
						errors.push("[CRITICAL] Non-Number function type provided on " + line_idx)
						lines_with_errors.push(index)
					} else {
						if ((pars[1] % 1) != 0) {
							success = false;
							can_update = false;
							errors.push("[CRITICAL] Non-Integer function type provided on " + line_idx)
							lines_with_errors.push(index)
						}
					}
					var has_dec = false;
					for (let a = 0; a < 3; a++) {
						if (isNaN(parseInt(pars[3 + a]))) {
							has_nan = true;
						} else if ((pars[3 + a] % 1) != 0) {
							has_dec = true;
						}
					}
					if (has_nan) {
						success = false;
						can_update = false;
						errors.push("[CRITICAL] One or more non-number parameter(s) provided on " + line_idx)
						lines_with_errors.push(index)
					}
					if (has_dec) {
						success = false;
						can_update = false;
						errors.push("[CRITICAL] One or more non-integer parameter(s) provided on " + line_idx)
						lines_with_errors.push(index)
					}
				}
				if (cond_count > 4) {
					success = false;
					can_update = false;
					errors.push("[CRITICAL] Condition count for a block exceeds 4 on line " + line_idx)
					lines_with_errors.push(index)
				}
				if (exec_count > 4) {
					success = false;
					can_update = false;
					errors.push("[CRITICAL] Execution count for a block exceeds 4 on line " + line_idx)
					lines_with_errors.push(index)
				}
				if (pars.filter(item => item != "").length != 6 && pars[0] != "ENDBLOCK") {
					success = false;
					can_update = false;
					errors.push("[CRITICAL] Invalid length on line " + line_idx)
					lines_with_errors.push(index)
				}
				valid_pars = ["ENDBLOCK","COND","CONDINV","EXEC"]
				if (valid_pars.indexOf(pars[0]) == -1) {
					success = false;
					can_update = false;
					errors.push("[CRITICAL] Invalid line type on line " + line_idx)
					lines_with_errors.push(index)
				}
				if (pars[0] == "ENDBLOCK" && pars.filter(item => item != "").length != 1) {
					errors.push("Endblock on line " + line_idx + " has parameters when it should not")
					lines_with_errors.push(index)
				}
				if (index == (lines.length - 1)) {
					if (pars[0] != "ENDBLOCK") {
						success = false;
						errors.push("[CRITICAL] Trailing conditionals and executions without an endblock on line " + line_idx)
						lines_with_errors.push(index)
					}
				}
				if (pars[0] != "ENDBLOCK" && pars[2] != "|") {
					success = false;
					can_update = true;
					errors.push("Invalid separator on line " + line_idx)
					lines_with_errors.push(index)
				}
			})
			document.getElementById("error_list").innerText = errors.join("\n")
			if (success) {
				document.getElementById("c_comparison").innerHTML = "";
				numericCommandsToC();
				fixTabbing();
			}
			updateLineHovering()
			lines_with_errors.forEach(item => {
				var lwe = document.getElementsByClassName("line" + item)
				for (let l = 0; l < lwe.length; l++) {
					lwe[l].classList.add("error-highlight")
				}
			})
			return success
		}

		function writeToFile() {
			var write_bytes = new Uint8Array(new_file.length);
			new_file.forEach((item,index) => {write_bytes[index] = item})
			var saveByteArray = (function () {
				var a = document.createElement("a");
				document.body.appendChild(a);
				a.style = "display:none";
				return function (data, name) {
					var blob = new Blob(data, {type: "octet/stream"}),
					url = window.URL.createObjectURL(blob);
					a.href = url;
					a.download = name;
					a.click();
					a.remove();
				};
			}())
			saveByteArray([write_bytes],'output.raw')
		}

		function numericToJSON() {
			var success = liveUpdate();
			if (success) {
				var hook = document.getElementById("numeric_editor")
				var text = hook.innerText;
				var lines = text.split("\n").filter(item => item != "").slice()
				var existing_data = scripts.filter(item => item.id == viewed_file)
				var is_new = true;
				var behav = 0;
				if (existing_data.length) {
					is_new = false;
					behav = existing_data[0].behav_9C;
				}
				var new_script_arr = [];
				var cond_count = 0;
				var exec_count = 0;
				var block_arr = [];
				lines.forEach(line => {
					var numeric_params = line.split(" ")
					var func = 0;
					var params = [];
					if (numeric_params[0] == "EXEC") {
						exec_count += 1;
						func = parseInt(numeric_params[1]);
						params = []
						for (let a = 0; a < 3; a++) {
							params.push(numeric_params[3 + a])
						}
						block_arr.push({
							"type": "execution",
							"func": func,
							"params": params.slice(),
						})
					} else if (numeric_params[0] == "COND" || numeric_params[0] == "CONDINV") {
						cond_count += 1;
						func = parseInt(numeric_params[1]);
						if (numeric_params[0] == "CONDINV") {
							func += 0x8000
						}
						params = []
						for (let a = 0; a < 3; a++) {
							params.push(numeric_params[3 + a])
						}
						block_arr.push({
							"type": "condition",
							"func": func,
							"params": params.slice(),
						})
					} else if (numeric_params[0] == "ENDBLOCK") {
						block_arr.push({
							"type": "endblock",
						})
						if (cond_count <= 4 && exec_count <= 4) {
							block_arr.forEach(block => {
								new_script_arr.push(block)
							})
						}
						block_arr = [];
						cond_count = 0;
						exec_count = 0;
					}
				})
				var script_insert = {
					"id": viewed_file,
					"behav_9C": behav,
					"script": new_script_arr.slice()
				}
				scripts = scripts.filter(item => item.id != viewed_file)
				scripts.push(script_insert)
			}
		}

		var current_numeric_line = 0;
		function numericCommandsToC() {
			num_hook = document.getElementById("numeric_editor")
			lines = num_hook.childNodes
			current_numeric_line = 0
			document.getElementById("c_comparison").innerHTML = "";
			//lines = num_hook.innerText.split("\n").filter(item => item != "")
			tab_indentation = 0;
			for (let l = 0; l < lines.length; l++) {
				item = lines[l].innerText;
				if (item) {
					if (item != "") {
						index = current_numeric_line;
						line_seg = item.split(" ")
						if (line_seg[0] != "ENDBLOCK") {
							func = parseInt(line_seg[1])
							params = []
							for (let a = 0; a < 3; a++) {
								params.push(parseInt(line_seg[3 + a]))
							}
							if (line_seg[0] == "EXEC") {
								grabExecution(0, func,params,0,0,"")
							} else {
								if (line_seg[0] == "CONVINV") {
									func += 0x8000
								}
								grabConditional(0, func,params,0,0,"")
							}
						} else {
							var hook = document.getElementById("c_comparison")
							for (let t = 0; t < tab_indentation; t++) {
								local_tab = 0
								for (let a = 0; a < tab_indentation - t - 1; a++) {
									local_tab += 1;
								}
								var block = document.createElement("div")
								var block_text = document.createTextNode("}")
								block.setAttribute("tabbing",local_tab);
								block.classList.add("code-line")
								block.appendChild(block_text)
								hook.appendChild(block)
							}
							tab_indentation = 0;
						}
						current_numeric_line++;
					}
				}
			}
		}

		function showScript(script_index, id_index) {
			viewed_file = id_index;
			items = document.getElementsByClassName("map-item")
			for (let i = 0; i < items.length; i++) {
				//console.log(items[i].getAttribute("id-index").toString() + "|" + id_index.toString())
				if (items[i].getAttribute("id-index").toString() == id_index.toString()) {
					items[i].classList.add("viewed-index")
				} else {
					items[i].classList.remove("viewed-index")
				}
			}
			hook = document.getElementById("numeric_editor")
			hook.innerHTML = ""
			var focused_script = scripts.find(item => item.id == id_index)
			if (focused_script) {
				focused_script.script.forEach(item => {
					hook.innerHTML += "<div>" + convertScriptLine(item) + "</div>"
				})
				document.getElementById("c_comparison").innerHTML = "";
				tab_indentation = 0;
				numericCommandsToC()
				fixTabbing()
				liveUpdate();
				updateLineHovering();
			}
		}

		function populateSelectList(script_list) {
			var hook = document.getElementById("map-select")
			hook.innerHTML = "";
			script_list.forEach((item,index) => {
				var item_div = document.createElement("div")
				var item_text = document.createTextNode("0x" + item.id.toString(16).toUpperCase());
				item_div.classList.add("map-item")
				item_div.setAttribute("id-index",item.id.toString())
				item_div.appendChild(item_text)
				item_div.setAttribute("onclick","showScript("+index+"," + item.id.toString() + ")")
				hook.appendChild(item_div)
			})
		}

		document.getElementById("file-selector").addEventListener("change", function() {
			var fr = new FileReader();
			fr.onload = function() {
				var data = fr.result;
				setup_data = fr.result;
			    var array = new Uint8Array(data);
			    file_bytes = array.slice()
				//console.log(file_bytes)
			    var script_list = parseFile();
			    populateSelectList(script_list);
			};
			fr.readAsArrayBuffer(document.getElementById("file-selector").files[0]);
        })		

		hud_items = [
			"Coloured banana",
			"Banana coin",
			"Ammo",
			"Homing ammo",
			"Orange",
			"Crystal",
			"Film",
			"Instrument",
			"GB Count?(Left)",
			"GB Count (Bottom)",
			"Banana Medal",
			"Minecart/Minigame Coin",
			"Blueprint",
			"Coloured Bananas (???)",
			"Banana coins (???)",
		]

		songs = [
			"Silence",
			"Jungle Japes (Starting Area)",
			"Cranky's Lab",
			"Jungle Japes (Minecart)",
			"Jungle Japes (Army Dillo)",
			"Jungle Japes (Caves/Underground)",
			"Funky's Hut",
			"Unused Coin Pickup",
			"Bonus Minigames",
			"Triangle Trample",
			"Guitar Gazump",
			"Bongo Blast",
			"Trombone Tremor",
			"Saxaphone Slam",
			"Angry Aztec",
			"Transformation",
			"Mini Monkey",
			"Hunky Chunky",
			"GB/Key Get",
			"Angry Aztec (Beetle Slide)",
			"Oh Banana",
			"Angry Aztec (Temple)",
			"Company Coin Get",
			"Banana Coin Get",
			"Going through Vulture Ring",
			"Angry Aztec (Dogadon)",
			"Angry Aztec (5DT)",
			"Frantic Factory (Car Race)",
			"Frantic Factory",
			"Snide's HQ",
			"Jungle Japes (Tunnels)",
			"Candy's Music Shop",
			"Minecart Coin Get",
			"Melon Slice Get",
			"Pause Menu",
			"Crystal Coconut Get",
			"Rambi",
			"Angry Aztec (Tunnels)",
			"Water Droplets",
			"Frantic Factory (Mad Jack)",
			"Success",
			"Start (To pause game)",
			"Failure",
			"DK Transition (Opening)",
			"DK Transition (Closing)",
			"Unused High-Pitched Japes",
			"Fairy Tick",
			"Melon Slice Drop",
			"Angry Aztec (Chunky Klaptraps)",
			"Frantic Factory (Crusher Room)",
			"Jungle Japes (Baboon Blast)",
			"Frantic Factory (R&D)",
			"Frantic Factory (Production Room)",
			"Troff 'n' Scoff",
			"Boss Defeat",
			"Angry Aztec (Baboon Blast)",
			"Gloomy Galleon (Outside)",
			"Boss Unlock",
			"Awaiting Entering the Boss",
			"Generic Twinkly Sounds",
			"Gloomy Galleon (Pufftoss)",
			"Gloomy Galleon (Seal Race)",
			"Gloomy Galleon (Tunnels)",
			"Gloomy Galleon (Lighthouse)",
			"Battle Arena",
			"Drop Coins (Minecart)",
			"Fairy Nearby",
			"Checkpoint",
			"Fungi Forest (Day)",
			"Blueprint Get",
			"Fungi Forest (Night)",
			"Strong Kong",
			"Rocketbarrel Boost",
			"Orangstand Sprint",
			"Fungi Forest (Minecart)",
			"DK Rap",
			"Blueprint Drop",
			"Gloomy Galleon (2DS)",
			"Gloomy Galleon (5DS/Submarine)",
			"Gloomy Galleon (Pearls Chest)",
			"Gloomy Galleon (Mermaid Palace)",
			"Fungi Forest (Dogadon)",
			"Mad Maze Maul",
			"Crystal Caves",
			"Crystal Caves (Giant Kosha Tantrum)",
			"Nintendo Logo (Old?)",
			"Success (Races)",
			"Failure (Races & Try Again)",
			"Bonus Barrel Introduction",
			"Stealthy Snoop",
			"Minecart Mayhem",
			"Gloomy Galleon (Mechanical Fish)",
			"Gloomy Galleon (Baboon Blast)",
			"Fungi Forest (Anthill)",
			"Fungi Forest (Barn)",
			"Fungi Forest (Mill)",
			"Generic Seaside Sounds",
			"Fungi Forest (Spider)",
			"Fungi Forest (Mushroom Top Rooms)",
			"Fungi Forest (Giant Mushroom)",
			"Boss Introduction",
			"Tag Barrel (All of them)",
			"Crystal Caves (Beetle Race)",
			"Crystal Caves (Igloos)",
			"Mini Boss",
			"Creepy Castle",
			"Creepy Castle (Minecart)",
			"Baboon Balloon",
			"Gorilla Gone",
			"DK Isles",
			"DK Isles (K Rool's Ship)",
			"DK Isles (Banana Fairy Island)",
			"DK Isles (K-Lumsy's Prison)",
			"Hideout Helm (Blast-O-Matic On)",
			"Move Get",
			"Gun Get",
			"Hideout Helm (Blast-O-Matic Off)",
			"Hideout Helm (Bonus Barrels)",
			"Crystal Caves (Cabins)",
			"Crystal Caves (Rotating Room)",
			"Crystal Caves (Tile Flipping)",
			"Creepy Castle (Tunnels)",
			"Intro Story Medley",
			"Training Grounds",
			"Enguarde",
			"K-Lumsy Celebration",
			"Creepy Castle (Crypt)",
			"Headphones Get",
			"Pearl Get",
			"Creepy Castle (Dungeon w/ Chains)",
			"Angry Aztec (Lobby)",
			"Jungle Japes (Lobby)",
			"Frantic Factory (Lobby)",
			"Gloomy Galleon (Lobby)",
			"Main Menu",
			"Creepy Castle (Inner Crypts)",
			"Creepy Castle (Ballroom)",
			"Creepy Castle (Greenhouse)",
			"K Rool's Theme",
			"Fungi Forest (Winch)",
			"Creepy Castle (Wind Tower)",
			"Creepy Castle (Tree)",
			"Creepy Castle (Museum)",
			"BBlast Final Star",
			"Drop Rainbow Coin",
			"Rainbow Coin Get",
			"Normal Star",
			"Bean Get",
			"Crystal Caves (Army Dillo)",
			"Creepy Castle (Kut Out)",
			"Creepy Castle (Dungeon w/out Chains)",
			"Banana Medal Get",
			"K Rool's Battle",
			"Fungi Forest (Lobby)",
			"Crystal Caves (Lobby)",
			"Creepy Castle (Lobby)",
			"Hideout Helm (Lobby)",
			"Creepy Castle (Trash Can)",
			"End Sequence",
			"K-Lumsy Ending",
			"Jungle Japes",
			"Jungle Japes (Cranky's Area)",
			"K Rool Takeoff",
			"Crystal Caves (Baboon Blast)",
			"Fungi Forest (Baboon Blast)",
			"Creepy Castle (Baboon Blast)",
			"DK Isles (Snide's Room)",
			"K Rool's Entrance",
			"Monkey Smash",
			"Fungi Forest (Rabbit Race)",
			"Game Over",
			"Wrinkly Kong",
			"100th CB Get",
			"K Rool's Defeat",
			"Nintendo Logo"
		]

		object_modeltwo_types = [
			"Nothing", // "test" internal name
			"Thin Flame?", // 2D
			"-",
			"Tree", // 2D
			"-",
			"Yellow Flowers", // 2D
			"-",
			"-",
			"Xmas Holly?", // 2D
			"-",
			"CB Single (Diddy)",
			"Large Wooden Panel", // 2D
			"Flames", // 2D
			"CB Single (DK)",
			"Large Iron Bars Panel", // 2D
			"Goo Hand", // Castle
			"Flame", // 2D
			"Homing Ammo Crate",
			"Coffin Door",
			"Coffin Lid",
			"Skull", // Castle, it has a boulder in it
			"Wooden Crate",
			"CB Single (Tiny)",
			"Shield", // Castle
			"Metal thing",
			"Coffin",
			"Metal Panel",
			"Rock Panel",
			"Banana Coin (Tiny)",
			"Banana Coin (DK)",
			"CB Single (Lanky)",
			"CB Single (Chunky)",
			"Tree", // Japes?
			"-",
			"Metal Panel",
			"Banana Coin (Lanky)",
			"Banana Coin (Diddy)",
			"Metal Panel",
			"Metal Panel Red",
			"Banana Coin (Chunky)",
			"Metal Panel Grey",
			"Tree", // Japes?
			"-",
			"CB Bunch (DK)",
			"Hammock",
			"Small jungle bush plant",
			"-",
			"Small plant",
			"Bush", // Japes
			"-",
			"-",
			"-", // Fungi Lobby, Unknown
			"Metal Bridge", // Helm Lobby
			"Large Blue Crystal", // Crystal Caves Lobby
			"Plant",
			"Plant",
			"-",
			"White Flowers",
			"Stem 4 Leaves",
			"-",
			"-",
			"Small plant",
			"-",
			"-",
			"-",
			"-",
			"-",
			"Yellow Flower",
			"Blade of Grass Large",
			"Lilypad?",
			"Plant",
			"Iron Bars", // Castle Lobby Coconut Switch
			"Nintendo Coin", // Not sure if this is collectable
			"Metal Floor",
			"-",
			"-",
			"Bull Rush",
			"-",
			"-",
			"Metal box/platform",
			"K Crate", // DK Helm Target Barrel
			"-",
			"Wooden panel",
			"-",
			"-",
			"-",
			"Orange",
			"Watermelon Slice",
			"Tree", // Unused?
			"Tree", // Unused
			"Tree",
			"Tree (Black)", // Unused
			"-",
			"Light Green platform",
			"-",
			"-",
			"-",
			"-",
			"Brick Wall",
			"-",
			"-",
			"-",
			"-",
			"Wrinkly Door (Tiny)",
			"-",
			"-",
			"-",
			"Conveyor Belt",
			"Tree", // Japes?
			"Tree",
			"Tree",
			"-",
			"Primate Punch Switch", // Factory
			"Hi-Lo toggle machine",
			"Breakable Metal Grate", // Factory
			"Cranky's Lab",
			"Golden Banana",
			"Metal Platform",
			"Metal Bars",
			"-",
			"Metal fence",
			"Snide's HQ",
			"Funky's Armory",
			"-",
			"Blue lazer field",
			"-",
			"Bamboo Gate",
			"-",
			"Tree Stump",
			"Breakable Hut", // Japes
			"Mountain Bridge", // Japes
			"Tree Stump", // Japes
			"Bamboo Gate",
			"-",
			"Blue/green tree",
			"-",
			"Mushroom",
			"-",
			"Disco Ball",
			"2 Door (5DS)", // Galleon
			"3 Door (5DS)", // Galleon
			"Map of DK island",
			"Crystal Coconut",
			"Ammo Crate",
			"Banana Medal",
			"Peanut",
			"Simian Slam Switch (Chunky, Green)",
			"Simian Slam Switch (Diddy, Green)",
			"Simian Slam Switch (DK, Green)",
			"Simian Slam Switch (Lanky, Green)",
			"Simian Slam Switch (Tiny, Green)",
			"Baboon Blast Pad",
			"Film",
			"Chunky Rotating Room", // Aztec, Tiny Temple
			"Stone Monkey Face",
			"Stone Monkey Face",
			"Aztec Panel blue",
			"-", // templestuff, in Tiny Temple
			"Ice Floor",
			"Ice Pole", // I think this is a spotlight
			"Big Blue wall panel",
			"Big Blue wall panel",
			"Big Blue wall panel",
			"Big Blue wall panel",
			"KONG Letter (K)",
			"KONG Letter (O)",
			"KONG Letter (N)",
			"KONG Letter (G)",
			"Bongo Pad", // DK
			"Guitar Pad", // Diddy
			"Saxaphone Pad", // Tiny
			"Triangle Pad", // Chunky
			"Trombone Pad", // Lanky
			"Wood panel small",
			"Wood panel small",
			"Wood panel small",
			"Wood Panel small",
			"Wall Panel", // Aztec
			"Wall Panel", // Caves?
			"Stone Monkey Face (Not Solid)",
			"Feed Me Totem", // Aztec
			"Melon Crate",
			"Lava Platform", // Aztec, Llama temple
			"Rainbow Coin",
			"Green Switch",
			"Coconut Indicator", // Free Diddy
			"Snake Head", // Aztec, Llama temple
			"Matching Game Board", // Aztec, Llama temple
			"Stone Monkey Head", // Aztec
			"Large metal section",
			"Production Room Crusher", // Factory
			"Metal Platform",
			"Metal Object",
			"Metal Object",
			"Metal Object",
			"Gong", // Diddy Kong
			"Platform", // Aztec
			"Bamboo together",
			"Metal Bars",
			"Target", // Minigames
			"Wooden object",
			"Ladder",
			"Ladder",
			"Wooden pole",
			"Blue panel",
			"Ladder",
			"Grey Switch",
			"D Block for toy world",
			"Hatch (Factory)",
			"Metal Bars",
			"Raisable Metal Platform",
			"Metal Cage",
			"Simian Spring Pad",
			"Power Shed", // Factory
			"Metal platform",
			"Sun Lighting effect panel",
			"Wooden Pole",
			"Wooden Pole",
			"Wooden Pole",
			"-",
			"Question Mark Box",
			"Blueprint (Tiny)",
			"Blueprint (DK)",
			"Blueprint (Chunky)",
			"Blueprint (Diddy)",
			"Blueprint (Lanky)",
			"Tree Dark",
			"Rope",
			"-",
			"-",
			"Lever",
			"Green Croc Head (Minecart)",
			"Metal Gate with red/white stripes",
			"-",
			"Purple Croc Head (Minecart)",
			"Wood panel",
			"DK coin",
			"Wooden leg",
			"-",
			"Wrinkly Door (Lanky)",
			"Wrinkly Door (DK)",
			"Wrinkly Door (Chunky)",
			"Wrinkly Door (Diddy)",
			"Torch",
			"Number Game (1)", // Factory
			"Number Game (2)", // Factory
			"Number Game (3)", // Factory
			"Number Game (4)", // Factory
			"Number Game (5)", // Factory
			"Number Game (6)", // Factory
			"Number Game (7)", // Factory
			"Number Game (8)", // Factory
			"Number Game (9)", // Factory
			"Number Game (10)", // Factory
			"Number Game (11)", // Factory
			"Number Game (12)", // Factory
			"Number Game (13)", // Factory
			"Number Game (14)", // Factory
			"Number Game (15)", // Factory
			"Number Game (16)", // Factory
			"Bad Hit Detection Wheel", // Factory
			"Breakable Gate", // Galleon Primate Punch
			"-",
			"Picture of DK island",
			"White flashing thing",
			"Barrel", // Galleon Ship
			"Gorilla Gone Pad",
			"Monkeyport Pad",
			"Baboon Balloon Pad",
			"Light", // Factory?
			"Light", // Factory?
			"Barrel", // Galleon Ship
			"Barrel", // Galleon Ship
			"Barrel", // Galleon Ship
			"Barrel", // Galleon Ship
			"Pad", // TODO: Empty blue pad? Where is this used?
			"Red Light", // Factory?
			"Breakable X Panel", // To enter Japes underground
			"Power Shed Screen", // Factory
			"Crusher", // Factory
			"Floor Panel",
			"Metal floor panel mesh",
			"Metal Door", // Factory or Car Race
			"Metal Door", // Factory or Car Race
			"Metal Door", // Factory or Car Race
			"Metal Door", // Factory or Car Race
			"Metal Door", // Factory or Car Race
			"Metal Door", // Factory or Car Race
			"Toyz Box",
			"O Pad", // Aztec Chunky Puzzle
			"Bonus Barrel Trap", // Aztec
			"Sun Idol", // Aztec, top of "feed me" totem
			"Candy's Shop",
			"Pineapple Switch",
			"Peanut Switch",
			"Feather Switch",
			"Grape Switch",
			"Coconut Switch",
			"-",
			"Kong Pad",
			"Boss Door", // Troff'n'Scoff
			"Troff n Scoff Feed Pad",
			"Metal Bars horizontal",
			"Metal Bars",
			"Harbour Gate", // Galleon
			"K. Rool's Ship", // Galleon
			"Metal Platform",
			"-",
			"Flame",
			"Flame",
			"Scoff n Troff platform",
			"Troff n Scoff Banana Count Pad (DK)",
			"Torch",
			"-",
			"-",
			"-",
			"Boss Key",
			"Machine",
			"Metal Door", // Factory or Car Race - Production Room & Lobby - Unused?
			"Metal Door", // Factory or Car Race - Testing Dept. & Krem Storage
			"Metal Door", // Factory or Car Race - R&D
			"Metal Door", // Factory or Car Race - Testing Dept.
			"Piano Game", // Factory, Lanky
			"Troff n Scoff Banana Count Pad (Diddy)",
			"Troff n Scoff Banana Count Pad (Lanky)",
			"Troff n Scoff Banana Count Pad (Chunky)",
			"Troff n Scoff Banana Count Pad (Tiny)",
			"Door 1342",
			"Door 3142",
			"Door 4231",
			"1 Switch (Red)",
			"2 Switch (Blue)",
			"3 Switch (Orange)",
			"4 Switch (Green)",
			"-",
			"Metal Archway",
			"Green Crystal thing",
			"Red Crystal thing",
			"Propeller",
			"Large Metal Bar",
			"Ray Sheild?",
			"-",
			"-",
			"-",
			"-",
			"Light",
			"Target", // Fungi/Castle minigames
			"Ladder",
			"Metal Bars",
			"Red Feather",
			"Grape",
			"Pinapple",
			"Coconut",
			"Rope",
			"On Button",
			"Up Button",
			"Metal barrel or lid",
			"Simian Slam Switch (Chunky, Red)",
			"Simian Slam Switch (Diddy, Red)",
			"Simian Slam Switch (DK, Red)",
			"Simian Slam Switch (Lanky, Red)",
			"Simian Slam Switch (Tiny, Red)",
			"Simian Slam Switch (Chunky, Blue)",
			"Simian Slam Switch (Diddy, Blue)",
			"Simian Slam Switch (DK, Blue)",
			"Simian Slam Switch (Lanky, Blue)",
			"Simian Slam Switch (Tiny, Blue)",
			"Metal Grate", // Lanky Attic
			"Pendulum", // Fungi Clock
			"Weight", // Fungi Clock
			"Door", // Fungi Clock
			"Day Switch", // Fungi Clock
			"Night Switch", // Fungi Clock
			"Hands", // Fungi Clock
			"Bell", // (Minecart?)
			"Grate", // (Minecart?)
			"Crystal", // Red - No Hitbox (Minecart)
			"Crystal", // Blue - No Hitbox (Minecart)
			"Crystal", // Green - No Hitbox (Minecart)
			"Door", // Fungi
			"Gate", // Fungi, angled
			"Breakable Door", // Fungi
			"Night Gate", // Fungi, angled
			"Night Grate", // Fungi
			"Unknown", // Internal name is "minecart"
			"Metal Grate", // Fungi, breakable, well
			"Mill Pulley Mechanism", // Fungi
			"Metal Bar", // No Hitbox (Unknown Location)
			"Water Wheel", // Fungi
			"Crusher", // Fungi Mill
			"Coveyor Belt",
			"Night Gate",
			"Question Mark Box", // Factory Lobby, probably other places too
			"Spider Web", // Door
			"Grey Croc Head", // Minecart?
			"Caution Sign (Falling Rocks)", // Minecart
			"Door", // Minecart
			"Battle Crown",
			"-",
			"-",
			"Dogadon Arena Background",
			"Skull Door (Small)", // Minecart
			"Skull Door (Big)", // Minecart
			"-",
			"Tombstone", // RIP, Minecart
			"-",
			"DK Star", // Baboon Blast
			"K. Rool's Throne",
			"Bean", // Fungi
			"Power Beam", // Helm (Lanky - BoM)
			"Power Beam", // Helm (Diddy - BoM)
			"Power Beam", // Helm (Tiny - Medal Room)
			"Power Beam", // Helm (Tiny - BoM)
			"Power Beam", // Helm (Chunky - Medal Room)
			"Power Beam", // Helm (Chunky - BoM)
			"Power Beam", // Helm (Lanky - Medal Room)
			"Power Beam", // Helm (DK - Medal Room)
			"Power Beam", // Helm (DK - BoM)
			"Power Beam", // Helm (Diddy - Medal Room)
			"Warning Lights", // Helm Wheel Room
			"K. Rool Door", // Helm
			"Metal Grate",
			"Crown Door", // Helm
			"Coin Door", // Helm
			"Medal Barrier (DK)", // Helm
			"Medal Barrier (Diddy)", // Helm
			"Medal Barrier (Tiny)", // Helm
			"Medal Barrier (Chunky)", // Helm
			"Medal Barrier (Lanky)", // Helm
			"I Door (Helm, DK)",
			"V Door (Helm, Diddy)",
			"III Door (Helm, Tiny)",
			"II Door (Helm, Chunky)",
			"IV Door (Helm, Lanky)",
			"Metal Door", // Helm CS
			"Stone Wall", // Helm
			"Pearl", // Galleon
			"Small Door", // Fungi
			"-",
			"Cloud", // Castle, Fungi?
			"Warning Lights", // Crusher/Grinder
			"Door", // Fungi
			"Mushroom (Yellow)",
			"Mushroom (Purple)",
			"Mushroom (Blue)",
			"Mushroom (Green)",
			"Mushroom (Red)",
			"Mushroom Puzzle Instructions",
			"Face Puzzle Board", // Fungi
			"Mushroom", // Climbable, Fungi
			"Small Torch", // Internal name "test", interestingly
			"DK Arcade Machine",
			"Simian Slam Switch (Any Kong?)", // Mad Jack fight
			"Spotlight (Crown Arena?)",
			"Battle Crown Pad",
			"Seaweed",
			"Light", // Galleon Lighthouse
			"Dust?",
			"Moon Trapdoor", // Fungi
			"Ladder", // Fungi
			"Mushroom Board", // 5 gunswitches, Fungi
			"DK Star",
			"Wooden Box", // Galleon?
			"Yellow CB Powerup", // Multiplayer
			"Blue CB Powerup", // Multiplayer
			"Coin Powerup?", // Multiplayer, causes burp
			"DK Coin", // Multiplayer?
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Snide's Mechanism",
			"Blue Flowers", // 2D
			"Plant (Green)", // 2D
			"Plant (Brown)", // 2D
			"Plant", // 2D
			"Pink Flowers", // 2D
			"Pink Flowers", // 2D
			"Plant", // 2D
			"Yellow Flowers", // 2D
			"Yellow Flowers", // 2D
			"Plant", // 2D
			"Blue Flowers", // 2D
			"Blue Flower", // 2D
			"Plant", // 2D
			"Plant", // 2D
			"Red Flowers", // 2D
			"Red Flower", // 2D
			"Mushrooms (Small)", // 2D
			"Mushrooms (Small)", // 2D
			"Purple Flowers", // 2D
			"Tree", // Castle?
			"Cactus", // Unused
			"Cactus", // Unused
			"Ramp", // Car Race?
			"Submerged Pot", // Unused
			"Submerged Pot", // Unused
			"Ladder", // Fungi
			"Ladder", // Fungi
			"Floor Texture?", // Fungi
			"Iron Gate", // Fungi
			"Day Gate", // Fungi
			"Night Gate", // Fungi
			"Cabin Door", // Caves
			"Ice Wall (Breakable)", // Caves
			"Igloo Door", // Caves
			"Castle Top", // Caves
			"Ice Dome", // Caves
			"Boulder Pad", // Caves
			"Target", // Caves, Tiny 5DI
			"Metal Gate",
			"CB Bunch (Lanky)",
			"CB Bunch (Chunky)",
			"CB Bunch (Tiny)",
			"CB Bunch (Diddy)",
			"Blue Aura",
			"Ice Maze", // Caves
			"Rotating Room", // Caves
			"Light + Barrier", // Caves
			"Light", // Caves
			"Trapdoor", // Caves
			"Large Wooden Door", // Aztec, Llama Temple?
			"Warp 5 Pad",
			"Warp 3 Pad",
			"Warp 4 Pad",
			"Warp 2 Pad",
			"Warp 1 Pad",
			"Large Door", // Castle
			"Library Door (Revolving?)", // Castle
			"Blue Platform", // Factory / K. Rool, Unused?
			"White Platform", // Factory / K. Rool, Unused?
			"Wooden Platform", // Castle
			"Wooden Bridge", // Castle
			"Wooden Door", // Castle
			"Metal Grate", // Castle Pipe
			"Metal Door", // Castle Greenhouse
			"Large Metal Door", // Castle?
			"Rotating Chair", // Castle
			"Baboon Balloon Pad (with platform)",
			"Large Aztec Door",
			"Large Aztec Door",
			"Large Wooden Door", // Castle Tree
			"Large Breakable Wooden Door", // Castle Tree
			"Pineapple Switch (Rotating)", // Castle Tree
			": Pad", // Aztec Chunky Puzzle
			"Triangle Pad", // Aztec Chunky Puzzle
			"+ Pad", // Aztec Chunky Puzzle
			"Stone Monkey Head", // Aztec
			"Stone Monkey Head", // Aztec
			"Stone Monkey Head", // Aztec
			"Door", // Caves Beetle Race
			"Broken Ship Piece", // Galleon
			"Broken Ship Piece", // Galleon
			"Broken Ship Piece", // Galleon
			"Flotsam", // Galleon
			"Metal Grate", // Factory, above crown pad
			"Treasure Chest", // Galleon
			"Up Switch", // Galleon
			"Down Switch",
			"DK Star", // Caves
			"Enguarde Door", // Galleon
			"Trash Can", // Castle
			"Fluorescent Tube", // Castle Toolshed?
			"Wooden Door Half", // Castle
			"Stone Platform", // Aztec Lobby?
			"Stone Panel", // Aztec Lobby?
			"Stone Panel (Rotating)", // Aztec Lobby
			"Wrinkly Door Wheel", // Fungi Lobby
			"Wooden Door", // Fungi Lobby
			"Wooden Panel", // Fungi? Lobby?
			"Electricity Shields?", // One for each kong, roughly in shape of Wrinkly Door wheel // TODO: Unused?
			"Unknown", // Internal name is "torches"
			"Boulder Pad (Red)", // Caves
			"Candelabra", // Castle?
			"Banana Peel", // Slippery
			"Skull+Candle", // Castle?
			"Metal Box",
			"1 Switch",
			"2 Switch",
			"3 Switch",
			"4 Switch",
			"Metal Grate (Breakable?)",
			"Pound The X Platform", // DK Isles
			"Wooden Door", // Castle Shed
			"Chandelier", // Castle
			"Bone Door", // Castle
			"Metal Bars", // Galleon
			"4 Door (5DS)",
			"5 Door (5DS)",
			"Door (Llama Temple)", // Aztec
			"Coffin Door", // Breakable?
			"Metal Bars",
			"Metal Grate", // Galleon
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"Boulder", // DK Isles, covering cannon to Fungi
			"Boulder", // DK Isles
			"K. Rool Ship Jaw Bottom", // DK Isles
			"Blast-O-Matic Cover?", // DK Isles
			"Blast-O-Matic Cover", // DK Isles
			"Door", // DK Isles, covering factory lobby, not solid
			"Platform", // DK Isles, up to Factory Lobby
			"Propeller", // K. Rool's Ship
			"K. Rool's Ship", // DK Isles, Intro Story
			"Mad Jack Platform (White)",
			"Mad Jack Platform (White)", // Factory
			"Mad Jack Platform (Blue)", // Factory
			"Mad Jack Platform (Blue)", // Factory
			"Skull Gate (Minecart)", // 2D
			"Dogadon Arena Outer",
			"Boxing Ring Corner (Red)",
			"Boxing Ring Corner (Green)",
			"Boxing Ring Corner (Blue)",
			"Boxing Ring Corner (Yellow)",
			"Lightning Rod", // Pufftoss Fight, DK Isles for some reason
			"Green Electricity", // Helm? Chunky BoM stuff?
			"Blast-O-Matic",
			"Target", // K. Rool Fight (Diddy Phase)
			"Spotlight", // K. Rool Fight
			"-",
			"Vine", // Unused?
			"Director's Chair", // Blooper Ending
			"Spotlight", // Blooper Ending
			"Spotlight", // Blooper Ending
			"Boom Microphone", // Blooper Ending
			"Auditions Sign", // Blooper Ending
			"Banana Hoard",
			"Boulder", // DK Isles, covering Caves lobby
			"Boulder", // DK Isles, covering Japes lobby
			"Rareware GB",
			"-",
			"-",
			"-",
			"-",
			"Platform (Crystal Caves Minigame)", // Tomato game
			"King Kut Out Arm (Bloopers)",
			"Rareware Coin", // Not collectable?
			"Golden Banana", // Not collectable?
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"-",
			"Rock", // DK Isles, Covering Castle Cannon?
			"K. Rool's Ship", // DK Isles, Entrance to final fight
			"-",
			"-",
			"-",
			"Wooden Door", // BFI Guarding Rareware GB
			"-",
			"-",
			"-",
			"Nothing?",
			"Troff n Scoff Portal",
			"Level Entry/Exit",
			"K. Lumsy Key Indicator?",
			"-",
			"-",
			"-",
			"-",
			"-",
			"Red Bell", // 2D, Minecart
			"Green Bell", // 2D, Minecart
			"Race Checkpoint",
			// Tested up to 0x2CF inclusive, all crashes so far
		];

		trigger_types = [
			"Unknown 0x00",
			"Unknown 0x01",
			"Unknown 0x02",
			"Boss Door Trigger", // Also sets boss fadeout type as fade instead of spin. In toolshed too??
			"Unknown 0x04",
			"Cutscene Trigger",
			"Unknown 0x06",
			"Unknown 0x07",
			"Unknown 0x08",
			"Loading Zone (0x9)",
			"Cutscene Trigger (0xA)",
			"Unknown 0x0B",
			"Loading Zone + Objects", // Allows objects through
			"Loading Zone (0xD)",
			"Unknown 0x0E",
			"Warp Trigger", // Factory Poles
			"Loading Zone (0x10)",
			"Loading Zone (0x11)", // Snide's, Return to Parent Map?
			"Coin Shower Trigger",
			"Detransform Trigger (0x13)",
			"Boss Loading Zone", // Takes you to the boss of that level
			"Autowalk Trigger",
			"Sound Trigger",
			"Cutscene Trigger (0x17)",
			"Unknown 0x18",
			"Unknown 0x19",
			"Gravity Trigger",
			"Slide Trigger", // Beetle Slides
			"Unslide Trigger",
			"Loading Zone (Zipper)",
			"Song Trigger",
			"Unknown 0x1F",
			"Cutscene Trigger (0x20)",
			"Unknown 0x21",
			"Unknown 0x22",
			"Unknown 0x23",
			"Detransform Trigger (0x24)",
			"Chunk Texture Load Trigger",
			"K. Lumsy Code Activator", // In BFI too, but seems like functionality in BFI has been stripped from final
		]

		relevant_pointer_tables = [
			{
				"index": 1,
				"name": "Map Geometry",
				"output_filename": "geometry.bin",
			},
			{
				"index": 2,
				"name": "Map Walls",
				"output_filename": "walls.bin",
			},
			{
				"index": 3,
				"name": "Map Floors",
				"output_filename": "floors.bin",
			},
			{
				"index": 8,
				"name": "Map Cutscenes",
				"output_filename": "cutscenes.bin",
			},
			{
				"index": 9,
				"name": "Map Setups",
				"output_filename": "setup.bin",
			},
			{
				"index": 10,
				"name": "Map Data 0xA",
				"output_filename": "map_0x0a.bin",
			},
			{
				"index": 15,
				"name": "Map Paths",
				"output_filename": "paths.bin",
			},
			{
				"index": 16,
				"name": "Map Paths",
				"output_filename": "character_spawners.bin",
			},
			{
				"index": 18,
				"name": "Map Loading Zones",
				"output_filename": "loading_zones.bin",
			},
			{
				"index": 21,
				"name": "Map Data 0x15",
				"output_filename": "map_0x15.bin",
			},
			{
				"index": 23,
				"name": "Map Exits",
				"output_filename": "exits.bin",
			},
		]

		function getTriggerTypeName(index) {
			if (index < (len(trigger_types) - 1)) {
				return trigger_types[index]
			}
			return "Type %s" % (hex(index))
		}

		function getSongName(index) {
			if (index < (len(songs) - 1)) {
				return songs[index]
			}
			return "Song %s" % (hex(index))
		}

		function getTOrF(value) {
			if (value == 0) {
				return "False"
			}
			return "True"
		}

		function getSetOrNot(value) {
			if (value == 0) {
				return "Don't Set"
			}
			return "Set"
		}

		var tab_indentation = 0;
		var main_pointer_table_offset = 0x101C50;
		function display(file, str, args) {
			hook = document.getElementById("c_comparison")
			str = str.toString()
			if (args.length > 0) {
				str_arr = str.split("%s")
				str = ""
				str_arr.forEach((item,index)=> {
					str += str_arr[index]
					if (index < (str_arr.length - 1)) {
						str += args[index]
					}
				})
			}
			if (str.substring(str.length - 1) != "{") {
				if (str.substring(str.length - 1) != "}") {
					str += ";"
				}
			}
			line_tabbing = 0
			for (let x = 0; x < tab_indentation; x++) {
				line_tabbing += 1
			}
			if (str.substring(str.length - 1) == "{") {
				tab_indentation += 1;
			} else if (str.substring(str.length - 1) == "}") {
				tab_indentation -= 1;
			}
			var block = document.createElement("div")
			block.classList.add("assoc-line-" + current_numeric_line.toString())
			var block_text = document.createTextNode(str)
			block.setAttribute("tabbing",line_tabbing);
			block.classList.add("code-line")
			block.appendChild(block_text)
			hook.appendChild(block)
			//hook.innerText += str + "\n"
			//file.write(string + "\n")
		}

		function fixTabbing() {
			var hooks = document.getElementsByClassName("code-line")
			for (let h = 0; h < hooks.length; h++) {
				hooks[h].style["padding-left"] = (parseInt(hooks[h].getAttribute("tabbing")) * 20).toString() + "px"
			}
		}

		function hexToFloat(hx_) {
			return hx_
		}

		conditional_list = [
			{
				"idx": 0,
				"params": ["","",""],
				"details": "Condition always succeeds unless inverse is applied",
			},
			{
				"idx": 1,
				"params": ["Target value","Behaviour offset from 0x48",""],
				"details": "Often used to check function stage if param2 == 0",
			},
			{
				"idx": 2,
				"params": ["","",""],
				"details": "Checks if player is standing on scripted object with locked_to_pad state of 1",
			},
			{
				"idx": 3,
				"params": ["","",""],
				"details": "Returns false",
			},
			{
				"idx": 5,
				"params": ["arg0","arg1",""],
				"details": "Checks output of FUN_806425FC()",
			},
			{
				"idx": 10,
				"params": ["","",""],
				"details": "Checks if player is standing on scripted object with locked_to_pad state of 2",
			},
			{
				"idx": 11,
				"params": ["player->0x12F target","",""],
				"details": "Checks if player is standing on scripted object with locked_to_pad state of 3",
			},
			{
				"idx": 13,
				"params": ["player->0x10E target","",""],
				"details": "Checks if player is standing on scripted object with locked_to_pad state of 1",
			},
			{
				"idx": 23,
				"params": ["player->control_state target","player->control_state_progress target",""],
				"details": "Checks if player ihas a specific control state & progress",
			},
		]

		function grabConditional(param_1, ScriptCommand,params,behaviour,param_3,file) {
			functionType = ScriptCommand & 0x7FFF
			inverseFlag = ScriptCommand & 0x8000
			inverseFlagChar = ""
			inverseFlagInvertedChar = "!"
			if (inverseFlag != 0) {
				inverseFlag = 1;
				inverseFlagChar = "!"
				inverseFlagInvertedChar = ""
			} else {
				inverseFlagChar = ""
				inverseFlagInvertedChar = "!"
			}
			switch(functionType) {
				case 0:
					display(file, "if (%strue) {", [inverseFlagChar])
					break;
				case 1:
					display(file, "if (*(byte *)(behaviour + %s) %s== %s) {", [hex(params[1] + 0x48), inverseFlagChar, str(params[0])])
					break;
				case 2:
					display(file, "x2_successful = 0",[])
					display(file, "x2_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "x2_focusedPlayerNumber_ = x2_focusedPlayerNumber",[])
					display(file, "x2_focusedPlayerNumber = (x2_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[x2_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "x2_focusedPlayerPointer = *(int *)(character_change_pointer[x2_focusedPlayerNumber_)]->character_pointer)",[])
					display(file, "if (*(byte *)(x2_focusedPlayerPointer->locked_to_pad) == 1) {",[])
					display(file, "if (this->id == *(short *)(x2_focusedPlayerPointer->standingOnObjectM2Index)) {",[])
					display(file, "x2_successful = 1",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "} while (x2_focusedPlayerNumber < player_count)",[])
					display(file, "}",[])
					display(file, "if (x2_successful %s== 1) {", [inverseFlagChar])
					break;
				case 3:
					display(file, "if (1 == 0) {",[])
					break;
				case 4:
					display(file, "if (*(ushort *)(behaviour + %s) %s== %s) {", [hex((params[1] * 2) + 0x44), inverseFlagChar, str(params[0])])
					break;
				case 5:
					display(file, "if (FUN_806425FC(%s,%s) %s== 0) {", [str(params[0]), str(params[1]), inverseFlagInvertedChar])
					break;
				case 6:
					display(file, 
						"if (*(code *)(%s)(behaviour,this->id,%s,%s) %s== 0) {", [hex(0x80748048 + (params[0] * 4)), str(params[1]), str(params[2]), inverseFlagInvertedChar])
					break;
				case 7:
					display(file, "if (FUN_80642500(behaviour + 0x14,%s,%s) %s== 0) {", [str(params[0]), str(params[1]), inverseFlagInvertedChar])
					break;
				case 8:
					display(file, "if (*(byte *)(behaviour + 0x51) %s== 0) {", [inverseFlagInvertedChar])
					break;
				case 9:
					display(file, "if (*(byte *)(behaviour + 0x52) %s== 0) {", [inverseFlagInvertedChar])
					break;
				case 10:
					display(file, "xA_successful = 0",[])
					display(file, "xA_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "xA_focusedPlayerNumber_ = xA_focusedPlayerNumber",[])
					display(file, "xA_focusedPlayerNumber = (xA_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[xA_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "xA_focusedPlayerPointer = *(int *)(character_change_pointer[xA_focusedPlayerNumber_]->character_pointer)",[])
					display(file, "xA_successful = 0",[])
					display(file, "if (*(byte *)(xA_focusedPlayerPointer->locked_to_pad) == 2) {",[])
					display(file, "if (this->id == *(short *)(xA_focusedPlayerPointer->standingOnObjectM2Index)) {",[])
					display(file, "xA_successful = 1",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "} while (xA_focusedPlayerNumber < player_count)",[])
					display(file, "}",[])
					display(file, "if (xA_successful %s== 1) {", [inverseFlagChar])
					break;
				case 11:
					display(file, "xB_successful = 0",[])
					display(file, "xB_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "xB_focusedPlayerNumber_ = xB_focusedPlayerNumber",[])
					display(file, "xB_focusedPlayerNumber = (xB_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[xB_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "xB_focusedPlayerPointer = *(int *)(character_change_pointer[xB_focusedPlayerNumber_]->character_pointer)",[])
					display(file, "if (*(byte *)(xB_focusedPlayerPointer->locked_to_pad) == 3) {",[])
					display(file, "if (*(byte *)(xB_focusedPlayerPointer->unk0x12F == %s)) {", [str(params[0])])
					display(file, "if (this->id == *(short *)(xB_focusedPlayerPointer->standingOnObjectM2Index)) {",[])
					display(file, "xB_successful = 1",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "} while (xB_focusedPlayerNumber < player_count)",[])
					display(file, "}",[])
					display(file, "if (xB_successful %s== 1) {", [inverseFlagChar])
					break;
				case 12:
					display(file, "if (%s(((((FLOAT_807F621C == FLOAT_807F61FC) && (FLOAT_807F6220 == 1729.11706543)) && ((FLOAT_807F6224 == 3433.54956055 && ((FLOAT_807F6228 == 330 && (FLOAT_807F622C == 170)))))) && (FLOAT_807F6230 == 0)) && (FLOAT_807F6234 == 1))) {", [inverseFlagInvertedChar])
					break;
				case 13:
					display(file, "xC_successful = 0",[])
					display(file, "xC_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "xC_focusedPlayerNumber_ = xC_focusedPlayerNumber",[])
					display(file, "xC_focusedPlayerNumber = (xC_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[xC_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "xC_focusedPlayerPointer = *(int *)(character_change_pointer[xC_focusedPlayerNumber_]->character_pointer)",[])
					display(file, "if (*(byte *)(xC_focusedPlayerPointer->locked_to_pad) == 1) {",[])
					display(file, "if (this->id == *(short *)(xC_focusedPlayerPointer->standingOnObjectM2Index)) {",[])
					display(file, "if (this->id == *(byte *)(xC_focusedPlayerPointer->unk0x10E == %s)) {", [str(params[0])])
					display(file, "xC_successful = 1",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "} while (xC_focusedPlayerNumber < player_count)",[])
					display(file, "}",[])
					display(file, "if (xC_successful %s== 1) {", [inverseFlagChar])
					break;
				case 14:
					display(file, "if (FUN_80641F70(param_1,%s) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 15:
					display(file, "if (FUN_80723C98(*(word *) (behaviour + 0x38)) %s== 0) {", [inverseFlagInvertedChar])
					break;
				case 16:
					x10_conditional = "";
					x10_conditional_2 = "";
					if (params[1] != -1) {
						x10_conditional = "(*(byte *)(behaviour + 0x5C) != " + str(params[1]) + ") || "
					}
					if( params[0] != 0) {
						x10_conditional_2 = "(FUN_8067ACC0(*(ushort *)(behaviour + 0x5E)) & " + str(params[0]) + ")"
						display(file, "if ((((*(byte *)(behaviour + 0x5C) == 0) || %s%s)) || (canHitSwitch() == 0)) {", [x10_conditional, x10_conditional_2])
						display(file, "x10_uvar9 = 0",[])
						display(file, "} else {",[])
						display(file, "FUN_80641724(ObjectModel2ArrayPointer[id2index(this->id)].object_type)",[])
						display(file, "x10_uvar9 = 1",[])
						display(file, "}",[])
						display(file, "if (x10_uvar9 %s== 1) {", [inverseFlagChar])
					} else {
						if (inverseFlag == 1) {
							display(file, "if (true) {",[])
						} else {
							display(file, "if (1 == 0) {",[])
						}
					}
					break;
				case 17:
					display(file, "x11_successful = false",[])
					display(file, "if (loadedActorCount != 0) {",[])
					display(file, "x11_focusedArraySlot = &loadedActorArray",[])
					display(file, "x11_focusedActor = loadedActorArray",[])
					display(file, "while (true) {",[])
					display(file, "x11_focusedArraySlot = x11_focusedArraySlot + 8",[])
					display(file, "if ((*(uint *)(x11_focusedActor->object_properties_bitfield) & 0x2000) == 0) {",[])
					display(file, "if (*(int *)(x11_focusedActor->actor_type) == %s) {", [str(params[0])])
					display(file, "if (x11_focusedActor->locked_to_pad == 1) {",[])
					display(file, "if (this->id == *(short *)(x11_focusedActor->standingOnObjectM2Index)) {",[])
					display(file, "x11_successful = true",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if ((&loadedActorArray + (loadedActorCount * 8) <= x11_focusedArraySlot) || (x11_successful)) break;",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if (%sx11_successful) {", [inverseFlagChar])
					break;
				case 18:
					display(file, "x12_successful = false",[])
					display(file, "if (loadedActorCount != 0) {",[])
					display(file, "x12_focusedArraySlot = &loadedActorArray",[])
					display(file, "x12_focusedActor = loadedActorArray",[])
					display(file, "while (true) {",[])
					display(file, "x12_focusedArraySlot = x12_focusedArraySlot + 8",[])
					display(file, "if ((*(uint *)(x12_focusedActor->object_properties_bitfield) & 0x2000) == 0) {",[])
					display(file, "if (*(int *)(x12_focusedActor->actor_type) == %s) {", [str(params[0])])
					display(file, "if (x12_focusedActor->locked_to_pad == 1) {",[])
					display(file, "if (this->id == *(short *)(x12_focusedActor->standingOnObjectM2Index)) {",[])
					display(file, "if (*(short *)(x12_focusedActor->unk10E) == %s) {", [str(params[1])])
					display(file, "x12_successful = true",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if ((&loadedActorArray + (loadedActorCount * 8) <= x12_focusedArraySlot) || (x12_successful)) break;",[])
					display(file, "x12_focusedActor = *x12_focusedArraySlot",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if (%sx12_successful) {", [inverseFlagChar])
					break;
				case 19:
					display(file, "if (isPlayerWithinDistanceOfObject(%s) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 20:
					display(file, "x14_successful_count = 0",[])
					display(file, "x14_focusedArraySlot = &loadedActorArray",[])
					display(file, "if (loadedActorCount != 0) {",[])
					display(file, "x14_focusedActor = loadedActorArray",[])
					display(file, "while (true) {",[])
					display(file, "x14_focusedArraySlot = x14_focusedArraySlot + 8",[])
					display(file, "if ((*(uint *)(x14_focusedActor->object_properties_bitfield) & 0x2000) == 0) {",[])
					display(file, "if (*(int *)(x14_focusedActor->actor_type) == %s) {", [str(params[0])])
					display(file, "if (x14_focusedActor->locked_to_pad == 1) {",[])
					display(file, "if (this->id == *(short *)(x14_focusedActor->standingOnObjectM2Index)) {",[])
					display(file, "if (*(short *)(x14_focusedActor->unk10E) == %s) {", [str(params[1])])
					display(file, "x14_successful_count = true",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if ((&loadedActorArray + (loadedActorCount * 8) <= x14_focusedArraySlot)) break;",[])
					display(file, "x14_focusedActor = *x14_focusedArraySlot",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if (x14_successful_count %s== %s) {", [inverseFlagChar, str(params[2])])
					break;
				case 21:
					display(file, "if (FUN_80650D04(this->id,%s) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 22:
					display(file, "if ((LevelStateBitfield & %s) != 0) {", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 23:
					display(file, "x17_successful = 0",[])
					display(file, "x17_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "x17_focusedPlayerNumber_ = x17_focusedPlayerNumber",[])
					display(file, "x17_focusedPlayerNumber = (x17_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[x17_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "x17_focusedPlayerPointer = *(int *)(character_change_pointer[x17_focusedPlayerNumber_]->character_pointer)",[])
					display(file, "if (*(byte *)(x17_focusedPlayerPointer->control_state) == %s) {", [str(params[0])])
					if (params[1] == 0) {
						display(file, "x17_successful = 1",[])
					} else {
						display(file, "if (x17_focusedPlayerPointer->control_state_progress == %s) {", [str(params[1])])
						display(file, "x17_successful = 1",[])
						display(file, "}",[])
					}
					display(file, "}",[])
					display(file, "}",[])
					display(file, "} while (x17_focusedPlayerNumber < player_count)",[])
					display(file, "}",[])
					display(file, "if (x17_successful %s== 1) {", [inverseFlagChar])
					break;
				case 24:
					display(file, "x18_successful = 0",[])
					display(file, "if (*(byte *)(behaviour + 0x5C) != 0) {",[])
					if (params[1] != -1) {
						display(file, "if (*(byte *)(behaviour + 0x5C) == %s){", [str(params[1])])
					}
					display(file, "if ((*(ushort *)(behaviour + 0x5E) == %s) && canHitSwitch() != 0) {", [str(params[0])])
					display(file, "FUN_80641724(ObjectModel2Array[id2index(this->id)].object_type)",[])
					display(file, "x18_successful = 1",[])
					display(file, "}",[])
					if (params[1] != -1) {
						display(file, "}",[])
					}
					display(file, "}",[])
					display(file, "if (x18_successful %s== 1) {", [inverseFlagChar])
					break;
				case 25:
					display(file, "if (*(int *)(PlayerPointer->ActorType) %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 26:
					display(file, "if (*(byte *)(character_change_pointer->unk0x2C0) %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 27:
					display(file, "if (*(byte *)(character_change_pointer->unk0x2C1) %s== 0){", [inverseFlagInvertedChar])
					break;
				case 28:
					display(file, "x1C_svar6 = 80650a70()",[])
					if (params[1] == 0) {
						if (inverseFlag == 0) {
							display(file, "if (x1C_svar6 < %s) {", [str(params[2])])
						} else {
							display(file, "if (x1C_svar6 >= %s) {", [str(params[2])])
						}
					} else if (params[1] == 1) {
						if (inverseFlag == 0) {
							display(file, "if (x1C_svar6 >= %s) {", [str(params[2])])
						} else {
							display(file, "if (x1C_svar6 < %s) {", [str(params[2])])
						}
					} else {
						display(file, "if (1 == 0) {",[])
					}
					break;
				case 29:
					if (params[0] == 0) {
						if (inverseFlag == 0) {
							display(file, "if (*(byte *)(behaviour + %s) < %s) {", [hex(0x48 + params[2]), str(params[1])])
						} else {
							display(file, "if (*(byte *)(behaviour + %s) >= %s) {", [hex(0x48 + params[2]), str(params[1])])
						}
					} else if (params[0] == 1) {
						if (inverseFlag == 0) {
							display(file, "if (*(byte *)(behaviour + %s) >= %s) {", [hex(0x48 + params[2]), str(params[1])])
						} else {
							display(file, "if (*(byte *)(behaviour + %s) < %s) {", [hex(0x48 + params[2]), str(params[1])])
						}
					} else {
						display(file, "if (1 == 0) {",[])
					}
					break;
				case 30:
					display(file, "if ((FUN_80726D7C() & 0xFF) %s== 0){", [inverseFlagInvertedChar])
					break;
				case 31:
					if (inverseFlag == 0) {
						display(file, "if (1 == 0) {",[])
					} else {
						display(file, "if (true) {",[])
					}
					break;
				case 32:
					display(file, "if ((FUN_806422D8() & 0xFF) %s== 0){", [inverseFlagInvertedChar])
					break;
				case 33:
					display(file, "x21_successful = 0",[])
					display(file, "x21_focusedPlayerNumber = 0",[])
					display(file, "if (player_count != 0) {",[])
					display(file, "do {",[])
					display(file, "x21_focusedPlayerNumber_ = x21_focusedPlayerNumber",[])
					display(file, "x21_focusedPlayerNumber = (x21_focusedPlayerNumber_ + 1) & 0xFF",[])
					display(file, "if (*(byte *)(character_change_pointer[x21_focusedPlayerNumber_]->does_player_exist) != 0) {",[])
					display(file, "x21_focusedPlayerPointer = *(int *)(character_change_pointer[x21_focusedPlayerNumber_]->character_pointer)",[])
					display(file, "if (*(byte *)(x21_focusedPlayerPointer->control_state_progress) == %s) {", [str(params[0])])
					display(file, "x21_successful = 1",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "if (x21_successful %s== 1) {", [inverseFlagChar])
					break;
				case 34:
					display(file, "if (touchingModelTwoById(%s) %s== 0) {", [hex(params[0]), inverseFlagInvertedChar])
					break;
				case 35:
					display(file, "if (CutsceneActive %s== 1) {", [inverseFlagChar])
					break;
				case 36:
					display(file, "x24_focusedActor = getSpawnerTiedActor(%s,0)", [str(params[0])])
					display(file, "if (*(byte *)(x24_focusedActor->control_state) %s== %s) {", [inverseFlagChar, str(params[1])])
					break;
				case 37:					
					display(file, "if (%s(*(byte *)CurrentCollectableBase->SlamLvl => %s)) {", [inverseFlagChar, str(params[0])])
					break;
				case 38:
					display(file, "if ((*(uint *)(PlayerPointer->unk0x368) & %s) %s== 0) {", [hex((params[0] * 0x10000) + params[1]), inverseFlagInvertedChar])
					break;
				case 39:
					display(file, "if ((*(uint *)(PlayerPointer->effectBitfield) & %s) %s== 0) {", [hex((params[0] * 0x10000) + params[1]), inverseFlagInvertedChar])
					break;
				case 40:
					display(file, "if ((*(byte *)(behaviour + 0x9A) & 1) %s== 0) {", [inverseFlagChar])
					break;
				case 41:
					display(file, "if (notTouchingActorSpawnerWithinRan(%s,%s,%s) %s== 0) {", [str(params[0]), str(params[1]), str(params[2]), inverseFlagInvertedChar])
					break;
				case 42:
					if (inverseFlag == 0) {
						display(file, "if (BYTE_807F61F8 != 0 || *(byte *)(PTR_0x807F61F0->control_state) == 5) {",[])
					} else {
						display(file, "if (BYTE_807F61F8 == 0 && *(byte *)(PTR_0x807F61F0->control_state) != 5) {",[])
					}
					break;
				case 43:
					display(file, "if (BYTE_807F61F8 %s== 0) {", [inverseFlagInvertedChar])
					break;
				case 44:
					display(file, "if (FUN_80689BAC(%s) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 45:
					display(file, "if (checkFlag(%s>%s,'Permanent') %s== 0) {", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), inverseFlagInvertedChar])
					break;
				case 46:
					display(file, "if (getAndSetActorSpawnerControlStateFromActorSpawnerID(%s,0,'%s') %s== %s) {", [str(params[0]), getSetOrNot(0), inverseFlagChar, str(params[1])])
					break;
				case 47:
					display(file, "if ((isCharacterSpawnerInState7(%s) & 0xFF) %s== 0) {", [str(params[0] & 0xFF), inverseFlagInvertedChar])
					break;
				case 48:
					display(file, "if (*(byte *)(PlayerPointer->unk0xD1) %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 49:
					display(file, "x31_ivar10_4 = id2index(&WORD_807F6240[%s])", [str(params[0])])
					display(file, "if (ObjectModel2ArrayPointer[x31_ivar10_4]->behaviour_pointer[%s] %s== %s) {", [hex(0x48 + params[2]), inverseFlagChar, str(params[1])])
					break;
				case 50:
					display(file, "if (*(ushort *)PreviousMap %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 51:
					if (params[0] == 0) {
						if (inverseFlag == 0) {
							display(file, "if (%s < FUN_80614A54(PlayerPointer)) {", [str(params[1])])
						} else {
							display(file, "if (%s >= FUN_80614A54(PlayerPointer)) {", [str(params[1])])
						}
					} else if (params[0] == 1) {
						if (inverseFlag == 0) {
							display(file, "if (%s >= FUN_80614A54(PlayerPointer)) {", [str(params[1])])
						} else {
							display(file, "if (%s < FUN_80614A54(PlayerPointer)) {", [str(params[1])])
						}
					} else {
						display(file, "if (1 == 0) {",[])
					}
					break;
				case 52:
					display(file, "x34_uvar4 == FUN_806C8D2C(%s)", [str(params[0])])
					if (inverseFlag == 0) {
						display(file, "if (%s <= &character_collectable_base[(BYTE_807FC929 * 0x5E) + (0x306 * x34_uvar4)] {", [str(params[1])])
					} else {
						display(file, "if (%s > &character_collectable_base[(BYTE_807FC929 * 0x5E) + (0x306 * x34_uvar4)] {", [str(params[1])])
					}
					break;
				case 53:
					display(file, "if (*(byte *)PlayerPointer->0xD0 %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 54:
					display(file, "if (checkFlag(%s>%s,'Temporary') %s== 0) {", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), inverseFlagInvertedChar])
					break;
				case 55:
					display(file, "FUN_80650D8C(this->id,%s,austack30,austack36)", [str(params[0])])
					display(file, "if (austack30[0] %s== %s) {", [inverseFlagChar, str(params[1])])
					break;
				case 56:
					display(file, "if (%s(*(byte *)Character < 5)) {", [inverseFlagChar])
					break;
				case 57:
					display(file, "if ((%s& *(ushort *)PlayerPointer->CollisionQueue->TypeBitfield) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 58:
					display(file, "if (((1 << %s) & BYTE_807F693E) %s== 0) {", [str(params[0]), inverseFlagInvertedChar])
					break;
				case 59:
					display(file, "if (checkFlag(%s>%s,'Global') %s== 0) {", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), inverseFlagInvertedChar])
					break;
				case 60:
					display(file, "if (PlayerPointer->chunk %s== %s) {", [inverseFlagChar, str(params[0])])
					break;
				case 61:
					display(file, "if (BYTE_807F6903 %s== 0) {", [inverseFlagInvertedChar])
					break;
				default:
					display(file, "if ([%s,%s,%s,%s]) {", [str(functionType), str(params[0]), str(params[1]), str(params[2])])
					break;
			}
		}
		function grabExecution(param_1, ScriptCommand,params,behaviour,param_3,file) {
			functionType = ScriptCommand
			switch (functionType) {
				case 0:
					display(file, "FUN_80642748(%s,%s,%s)", [str(params[0]),str(params[1]),str(behaviour)])
					break;
				case 1:
					display(file, "*(byte *)(behaviour + %s) = %s", [hex(params[1] + 0x4B), str(params[0])])
					break;
				case 2:
					display(file, "FUN_80723284(*(int*)(behaviour + 0x38),%s)", [str(params[0])])
					break;
				case 3:
					if (params[0] == 0) {
						display(file, "*(short *)(behaviour + %s) = %s", [hex((params[2] * 2) + 0x44), str(params[1])])
					} else {
						display(file, "*(short *)(behaviour + %s) = *(short *)(behaviour + %s)", [hex((params[2] * 2) + 0x44), hex((params[1] * 4) + 0x14)])
					}
					break;
				case 4:
					display(file, "FUN_80723484(*(int *)(behaviour + 0x38))",[])
					display(file, "FUN_807238D4(*(int *)(behaviour + 0x38),0x807F621C,0x807F6220,0x807F6224)",[])
					break;
				case 5:
					display(file, "FUN_806418E8(%s,%s,behaviour)", [str(params[0]), str(params[1])])
					break;
				case 6:
					display(file, "*(float *)(behaviour + %s) = %s", [hex((params[0] * 4) + 0x14), str(params[1] / 10)])
					break;
				case 7:
					display(file, "*(code *)(%s)(behaviour,this->id,%s,%s)", [hex(0x80747E70 + (params[0] * 4)), str(params[1]), str(params[2])])
					break;
				case 8:
					display(file, "FUN_80642844(%s,%s,behaviour)", [str(params[0]), str(params[1])])
					break;
				case 9:
					display(file, "if ((FLOAT_807F621C != FLOAT_807F61FC) || (FLOAT_807F6224 != 3433.54956055)) {",[])
					display(file, "FUN_80642480(%s)", [str(params[0])])
					display(file, "}",[])
					break;
				case 0xA:
					display(file, "*(byte *)(behaviour + 0x50) = %s", [str(params[0])])
					display(file, "*(float *)(behaviour + 0x78) = %s", [str(params[1] / 100)])
					display(file, "*(float *)(behaviour + 0x7C) = %s", [str(params[2] / 100)])
					break;
				case 0xB:
					display(file, "*(short *)(behaviour + 0x80) = %s", [str(params[0])])
					display(file, "*(short *)(behaviour + 0x82) = %s", [str(params[1])])
					break;
				case 0xC:
					display(file, "*(short *)(behaviour + 0x84) = %s", [str(params[0])])
					display(file, "*(short *)(behaviour + 0x86) = %s", [str(params[1])])
					break;
				case 0xD:
					display(file, "*(short *)(behaviour + 0x88) = %s", [str(params[0])])
					display(file, "*(short *)(behaviour + 0x8A) = %s", [str(params[1])])
					break;
				case 0xE:
					display(file, "if (*(short *)(behaviour + %s) < 0) {", [hex(((params[0] & 1) * 2) + 0x10)])
					display(file, "*(short *)(behaviour + %s) = FUN_80605044(this->id,%s,%s,%s)", [hex(((params[0] & 1) * 2) + 0x10), str(params[0]), str(params[2] & 0x7F), str(params[1] & 2)])
					display(file, "}",[])
					break;
				case 0xF:
					xF_ivar5 = params[1]
					if (params[1] < 0) {
						xF_ivar5 = xF_ivar5 + 0x7F
					}
					xF_uvar9 = (xF_ivar5 >> 7) & 0xFF
					xF_bvar15 = xF_uvar9
					xF_ivar5 = params[2]
					if (params[2] < 0) {
						xF_ivar5 = xF_ivar5 + 0x7F
					}
					xF_uvar14 = (xF_ivar5 >> 7) & 0xFF
					if (xF_uvar9 == 0) {
						xF_bvar15 = 0x7F
					}
					if (xF_uvar14 == 0) {
						xF_uvar14 = 0xFF
					}
					display(file, "FUN_806085DC(this->id,%s,%s,%s)", [str(params[0]), str(xF_uvar14), str(xF_bvar15)])
					break;
				case 0x10:
					display(file, "x10_temp = *(short *)(behaviour + %s)", [hex((params[1] * 2) + 0x10)])
					display(file, "if (-1 < x10_temp) {",[])
					display(file, "FUN_80605380(x10_temp)",[])
					display(file, "*(short *)(behaviour + %s) = 0xFFFF", [hex((params[1] * 2) + 0x10)])
					display(file, "}",[])
					break;
				case 0x11:
					display(file, "FUN_806508B4(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x12:
					display(file, "FUN_8065092C(this->id,%s)", [str(params[0])])
					break;
				case 0x13:
					display(file, "FUN_80650998(this->id,%s)", [str(params[0])])
					break;
				case 0x14:
					display(file, "FUN_80650A04(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x15:
					display(file, "FUN_80650b50(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x16:
					display(file, "FUN_80650BBC(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x17:
					display(file, "FUN_80650C28(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x18:
					display(file, "FUN_80650C98(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x19:
					display(file, "setCharacterChangeParameters(%s,0,0)", [str(params[0])])
					break;
				case 0x1A:
					display(file, "FUN_80650AD8(this->id,%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2] / 100)])
					break;
				case 0x1B:
					display(file, "if ((&WORD_807F6240)[%s] != -1) {", [str(params[0])])
					display(file, "FUN_806335B0((&WORD_807F6240)[%s],1,%s)", [str(params[0]), str(params[1])])
					display(file, "}",[])
					break;
				case 0x1C:
					display(file, "if ((&WORD_807F6240)[id2index(%s)] != -1) {", [str(params[0])])
					display(file, "x1C_ivar7 = (&WORD_807F6240)[%s]", [str(params[0])])
					display(file, "if ((x1C_ivar7 != -1) && (ObjectModel2ArrayPointer[x1C_ivar7].behaviour != 0)) {",[])
					display(file, "x1C_puvar10 = ObjectModel2ArrayPointer[x1C_ivar7].behaviour + %s", [str(params[1])])
					display(file, "x1C_puvar10[0x48] = x1C_puvar10[0x48] + %s", [str(params[2])])
					display(file, "}",[])
					display(file, "}",[])
					break;
				case 0x1D:
					display(file, "FUN_80642844(%s,%s,behaviour)", [str(params[0]), str(params[1])])
					break;
				case 0x1E:
					display(file, "FUN_80642748(%s,%s,behaviour)", [str(params[0]), str(params[1])])
					break;
				case 0x1F:
					display(file, "FUN_807232EC(*(int *)(behaviour + 0x38),%s)", [str(params[0])])
					break;
				case 0x20:
					display(file, "FUN_80723380(*(int *)(behaviour + 0x38),%s)", [str(params[0])])
					break;
				case 0x21:
					display(file, "FUN_80723320(*(int *)(behaviour + 0x38),%s)", [str(params[0])])
					break;
				case 0x22:
					display(file, "*(int *)(behaviour + 0x38) = FUN_80723020(FLOAT_807F6220,FLOAT_807F6224,%s)", [str(params[2])])
					break;
				case 0x23:
					display(file, "FUN_80723428(*(int *)(behaviour + 0x38))",[])
					display(file, "*(int *)(behaviour + 0x38) = 0xFFFFFFFF",[])
					break;
				case 0x24:
					display(file, "FUN_8072334C(*(int *)(behaviour + 0x38),%s)", [str(params[0])])
					break;
				case 0x25:
					display(file, "playCutsceneFromModelTwoScript(behaviour,%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x26:
					display(file, "FUN_8064199C(behaviour,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x27:
					display(file, "FUN_80634EA4(this->id,%s,%s)", [str(params[0]), str(params[1] & 0xFF)])
					break;
				case 0x28:
					display(file, "FUN_80635018(this->id,%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x29:
					display(file, "FUN_8061EF4C(0x29,PlayerPointer->unk0x27C,%s,%s,FLOAT_807F621C)", [str(params[0] & 0xFF), str(params[1])])
					break;
				case 0x2A:
					display(file, "ObjectModel2ArrayPointer[id2Index(this->id)]->unk0x3C = %s", [str(params[0])])
					break;
				case 0x2B:
					display(file, "FUN_80636014(this->id,1)",[])
					break;
				case 0x2C:
					display(file, "FUN_806335B0(this->id,1,%s", [str(params[0])])
					display(file, "FUN_8067A9F0(0,PlayerPointer)",[])
					break;
				case 0x2D:
					display(file, "x2d_counter = 0",[])
					display(file, "x2d_PTR_focusedLoadedActor = &PTR_DAT_807FB930",[])
					display(file, "if (loadedActorCount != 0) {",[])
					display(file, "do {",[])
					display(file, "x2d_ADDR_focusedLoadedActor = *x2d_PTR_focusedLoadedActor",[])
					display(file, "x2d_counter = x2d_counter + 1",[])
					display(file, "if ((*(uint *)(x2d_ADDR_focusedLoadedActor->object_properties_bitfield_1) & 0x2000) == 0) {",[])
					display(file, "if (x2d_ADDR_focusedLoadedActor->locked_to_pad == 0x1) {",[])
					display(file, "if (this->id == *(word *)(x2d_ADDR_focusedLoadedActor->unk0x10C)) {",[])
					if (params[0] == 0) {
						display(file, "*(ushort *)(x2d_ADDR_focusedLoadedActor->unk0x68) = *(ushort *)(x2d_ADDR_focusedLoadedActor->unk0x68) & 0xFFFB",[])
					} else {
						display(file, "*(ushort *)(x2d_ADDR_focusedLoadedActor->unk0x68) = *(ushort *)(x2d_ADDR_focusedLoadedActor->unk0x68) | 4",[])
					}
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "x2d_PTR_focusedLoadedActor = x2d_PTR_focusedLoadedActor + 8",[])
					display(file, "x2d_finishedArray = x2d_counter < loadedActorCount",[])
					display(file, "} while(x2d_finishedArray)",[])
					display(file, "}",[])
					break;
				case 0x2E:
					display(file, "FUN_80651BC0(%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x2F:
					display(file, "FUN_8060B49C(PlayerPointer,%s)", [str(params[0])])
					break;
				case 0x30:
					display(file, "InitMapChange(%s,0)", [str(params[0])])
					break;
				case 0x31:
					if ((params[2] & 0x100) != 0) {
						display(file, "SetIntroStoryPlaying(2)",[])
						display(file, "setNextTransitionType('Fade (Wrong Cutscene)')",[])
					}
					if ((params[2] & 0xFF) == 0) {
						display(file, "InitMapChange_TransferredActor(%s,%s,0,0)", [str(params[0]), str(params[1])])
					} else {
						if ((params[2] & 0xFF) == 1) {
							display(file, "InitMapChange_TransferredActor(%s,%s,0,1)", [str(params[0]), str(params[1])])
						} else if ((params[2] & 0xFF) == 2) {
							display(file, "InitMapChange_TransferredActor(%s,%s,0,3)", [str(params[0]), str(params[1])])
						} else {
							display(file, "InitMapChange_TransferredActor(%s,%s,0,0)", [str(params[0]), str(params[1])])
						}
					}
					break;
				case 0x32:
					display(file, "InitMapChange_ParentMap(%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x33:
					display(file, "FUN_8062B86C(%s,(float)%s,(float)%s)", [str(params[0]), str(params[1]), str(params[2] / 100)])
					break;
				case 0x34:
					display(file, "FUN_8062B8A4(%s,(float)%s,(float)%s)", [str(params[0]), str(params[1]), str(params[2] / 100)])
					break;
				case 0x35:
					display(file, "FUN_80641C98(%s,%s,this->id)", [str(params[0]), str(params[1])])
					break;
				case 0x36:
					display(file, "FUN_80641BCC(%s,%s,this->id)", [str(params[0]), str(params[1])])
					break;
				case 0x37:
					display(file, "FUN_80679200(PlayerPointer,0,0x400000,%s)", [str(params[0] & 0xFF)])
					break;
				case 0x38:
					display(file, "FUN_80651be0(%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x39:
					display(file, "*(byte *)(behaviour + 0x4F) = %s", [str(params[0])])
					break;
				case 0x3A:
					display(file, "// Execution Type 0x3A stripped from final. Parameters: %s, %s, %s", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x3B:
					display(file, "*(uint *)(PlayerPointer->unk0x368) = *(uint *)(PlayerPointer->unk0x368) & ~%s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x3C:
					display(file, "if (*(int *)(behaviour + 0x94) != 0) {",[])
					display(file, "FUN_806782C0(*(int *)(behaviour + 0x94))",[])
					display(file, "*(int *)(behaviour + 0x94) = 0",[])
					display(file, "}",[])
					break;
				case 0x3D:
					display(file, "*(byte *)(behaviour + 0x67) = %s", [str(params[0])])
					break;
				case 0x3E:
					display(file, "*(byte *)(behaviour + 0x6F) = %s", [str(params[0])])
					break;
				case 0x3F:
					display(file, "*(byte *)(behaviour + 0x6E) = %s", [str(params[0])])
					break;
				case 0x40:
					display(file, "*(int *)LevelStateBitfield = *(int *)LevelStateBitfield | %s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x41:
					display(file, "WORD_807F6904 = 1",[])
					break;
				case 0x42:
					display(file, "FUN_80634CC8(this->id,%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x43:
					display(file, "if (%s == 1) {", [str(params[0])])
					display(file, "*(int *)(behaviour + 0x8) = *(int *)(behaviour + %s)", [hex((params[1] * 4) + 0x14)])
					display(file, "*(int *)(behaviour + 0xC) = *(int *)(behaviour + %s)", [hex((params[2] * 4) + 0x14)])
					display(file, "}",[])
					display(file, "else {",[])
					display(file, "*(float *)(behaviour + 0x8) = %s", [str(params[1] / 10)])
					display(file, "*(float *)(behaviour + 0xC) = %s", [str(params[2] / 10)])
					display(file, "}",[])
					break;
				case 0x44:
					display(file, "WORD_807F6906 = %s", [str(params[0])])
					display(file, "WORD_807F6908 = %s", [str(params[1])])
					break;
				case 0x45:
					display(file, "*(byte *)(behaviour + 0x60) = %s", [str(params[0])])
					display(file, "*(ushort *)(behaviour + 0x62) = %s", [str(params[1])])
					display(file, "*(byte *)(behaviour + 0x66) = %s", [str(params[2])])
					break;
				case 0x46:
					display(file, "*(byte *)(behaviour + 0x70) = %s", [str(params[0])])
					break;
				case 0x47:
					display(file, "*(byte *)(behaviour + 0x71) = %s", [str(params[0])])
					break;
				case 0x48:
					display(file, "FUN_80604BE8(*(byte *)(behaviour + %s,%s,%s)", [hex((params[0] * 2) + 0x11), str(params[1] / 100), str(params[2])])
					break;
				case 0x49:
					display(file, "FUN_8067ABC0(%s,FLOAT_807F621C,FLOAT_807F6220,FLOAT_807F6224)", [str(params[2])])
					break;
				case 0x4A:
					display(file, "FUN_8063393C(this->id,1,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x4B:
					display(file, "FUN_8072ED9C(this->id,%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x4C:
					display(file, "x4C_temp = FUN_80650A70()",[])
					display(file, "x4C_temp = (x4C_temp + %s)", [hex(params[1])])
					display(file, "if (x4C_temp < 0) {",[])
					display(file, "x4C_temp = 0",[])
					display(file, "}",[])
					display(file, "FUN_80650A04(this->id,%s,x4C_temp)", [str(params[0])])
					break;
				case 0x4D:
					display(file, "x4D_svar12 = SpawnModelTwoObject(0,%s,FLOAT_807F690C,FLOAT_807F6910,FLOAT_807F6914)", [str(params[0])])
					if (params[1] == 0) {
						display(file, "FUN_80641B00(x4D_svar12,this->id,%s)", [str(params[2])])
					}
					break;
				case 0x4E:
					display(file, "FUN_807146A4(%s)", [str(params[0])])
					display(file, "FUN_807149B8(1)",[])
					display(file, "FUN_80714B84(0)",[])
					break;
				case 0x4F:
					display(file, "if (BYTE_807F6938 != 0x10) {",[])
					if (params[0] == -2) {
						display(file, "(&WORD_807F6918)[BYTE_807F6938] = ObjectModel2ArrayPointer[id2index(this->id)]->id",[])
					} else {
						display(file, "(&WORD_807F6918)[BYTE_807F6938] = %s", [str(params[0])])
					}
					display(file, "BYTE_807F6938 = BYTE_807F6938 + 1",[])
					break;
				case 0x50:
					display(file, "if ((&WORD_807F6240)[%s] != -1) {", [str(params[0])])
					display(file, "FUN_806335B0((&WORD_807F6240)[%s],1,%s)", [str(params[0]), str(params[1])])
					display(file, "}",[])
					break;
				case 0x51:
					display(file, "FUN_806F4F50(this->id,FLOAT_807F621C,FLOAT_807F6220,FLOAT_807F6224)",[])
					break;
				case 0x52:
					display(file, "// Execution Type 0x52 stripped from final. Parameters: %s,%s,%s", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x53:
					display(file, "// Execution Type 0x53 stripped from final. Parameters: %s,%s,%s", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x54:
					display(file, "x54_ivar7 = id2index((&WORD_807F6240)[%s])", [str(params[0])])
					display(file, "if (x54_ivar7 != -1) {",[])
					display(file, "FUN_8064199C(ObjectModel2ArrayPointer[x54_ivar7].behaviour,%s,%s)", [str(params[1]), str(params[2])])
					display(file, "}",[])
					break;
				case 0x55:
					display(file, "FUN_8062B630(%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x56:
					display(file, "FUN_80724994(1,%s,0,0)", [str(params[0])])
					break;
				case 0x57:
					display(file, "FUN_80659620(&uStack52,&uStack56,&uStack60,WORD_807F693A)",[])
					display(file, "FUN_80659670(%s + fStack32, %s + fStack56,extraout_a0,extraout_a1, %s + fStack60, WORD_807F693A)", [str(params[0] / 1000), str(params[1] / 1000), str(params[0] / 1000)])
					break;
				case 0x58:
					display(file, "x58_temp = FUN_805FFE50(%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					display(file, "if (x58_temp == 0) {",[])
					display(file, "FUN_8063DB3C(%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					display(file, "}",[])
					break;
				case 0x59:
					display(file, "FUN_80724994(3,%s,%s,0)", [str(params[0]), str(params[1])])
					break;
				case 0x5A:
					display(file, "*(ushort *)(behaviour + 0x68) = %s", [str(params[0])])
					display(file, "*(ushort *)(behaviour + 0x6A) = %s", [str(params[1])])
					display(file, "*(ushort *)(behaviour + 0x6C) = %s", [str(params[2])])
					break;
				case 0x5B:
					display(file, "FUN_806C92C4(%s)", [str(params[0])])
					break;
				case 0x5C:
					display(file, "FUN_80724A9C(%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x5D:
					display(file, "setNextTransitionType(%s)", [str(params[0])])
					break;
				case 0x5E:
					display(file, "FUN_80641874()",[])
					break;
				case 0x5F:
					display(file, "*(uint *)(PlayerPointer->ExtraInfo->unk0x1F0) = *(uint *)(PlayerPointer->ExtraInfo->unk0x1F0 | %s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x60:
					display(file, "FUN_8065F134()",[])
					break;
				case 0x61:
					if (params[2] == 0) {
						display(file, "playSong('%s', 1)", [getSongName(params[0])])
					} else {
						display(file, "playSong('%s', %s)", [getSongName(params[0]), str(params[2] / 255)])
					}
					break;
				case 0x62:
					display(file, "WORD_807F693A = %s", [str(params[0])])
					break;
				case 0x63:
					display(file, "FUN_8068B830()",[])
					break;
				case 0x64:
					display(file, "FUN_8068B8FC()",[])
					break;
				case 0x65:
					display(file, "*(byte *)(behaviour + %s) = (byte *)(behaviour + %s) + %s", [hex(params[1] + 0x4B), hex(params[1] + 0x4B), str(params[0])])
					break;
				case 0x66:
					display(file, "if (BYTE_807F61F8 == 0) {",[])
					display(file, "spawnActor(TimerController)",[])
					display(file, "temp = CurrentActorPointer",[])
					display(file, "WORD_807F61F4 = PTR_PTR_807FBB44",[])
					display(file, "CurrentActorPointer = mainmemory.read_u32_be(0x7FBB44)",[])
					display(file, "spawnTimer(0xDC,0x2A,%s)", [str(params[0])])
					display(file, "BYTE_807F61F8 = 1",[])
					display(file, "WORD_807F61F0 = PTR_PTR_807FBB44",[])
					display(file, "CurrentActorPointer = temp",[])
					display(file, "}",[])
					break;
				case 0x67:
					display(file, "if (BYTE_807F61F8 != 0) {",[])
					display(file, "FUN_806A2B08()",[])
					display(file, "}",[])
					break;
				case 0x68:
					display(file, "if (BYTE_807F61F8 != 0) {",[])
					display(file, "FUN_806782C0(DWORD_807F61F0)",[])
					display(file, "FUN_806782C0(DWORD_807F61F4)",[])
					display(file, "}",[])
					break;
				case 0x69:
					display(file, "FUN_80661398()",[])
					break;
				case 0x6A:
					display(file, "FUN_806613E8(%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2] / 100)])
					break;
				case 0x6B:
					display(file, "setFlag(%s>%s,%s,'Permanent')", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), getTOrF(params[1])])
					break;
				case 0x6C:
					display(file, "FUN_80631B8C(%s)", [str(params[0])])
					break;
				case 0x6D:
					display(file, "FUN_8063A8C4(this->id,1,%s)", [str(params[0] / 100)])
					break;
				case 0x6E:
					display(file, "BYTE_807F693F = %s", [str(params[0])])
					break;
				case 0x6F:
					display(file, "?playMusic(%s,%s)", [str(params[0]), str(params[1] & 0xFF)])
					break;
				case 0x70:
					display(file, "FUN_80602C6C(%s,%s)", [str(params[0]), str(params[1] / 255)])
					break;
				case 0x71:
					display(file, "FUN_80602DC4()",[])
					break;
				case 0x72:
					display(file, "getAndSetActorSpawnerControlStateFromActorSpawnerID(%s,%s,'%s')", [str(params[0]), str(params[1] & 0xFF), getSetOrNot(1)])
					break;
				case 0x73:
					display(file, "FUN_806EB178(0,%s,%s,%s)", [str(params[0]), str(params[1]), str(params[2])])
					break;
				case 0x74:
					// Persistance of code running when not loaded
					display(file, "*(byte *)(behaviour + 0x9B) = *(byte *)(behaviour + 0x9B) | %s", [hex(params[0])])
					break;
				case 0x75:
					display(file, "changeTriggerActiveStateOfFirstInstanceOfType('%s',%s)", [getTriggerTypeName(params[0]), str(params[1])])
					break;
				case 0x76:
					display(file, "x76_counter = 0",[])
					display(file, "x76_focusedLoadedActorSlot = &loadedActorArray",[])
					display(file, "if (loadedActorCount != 0) {",[])
					display(file, "do {",[])
					display(file, "x76_focusedLoadedActor = *x76_focusedLoadedActorSlot",[])
					display(file, "if ((*(uint *)(x76_focusedLoadedActor->object_properties_bitfield) & 0x2000) == 0) {",[])
					display(file, "if (x76_focusedLoadedActor->locked_to_pad == 1) {",[])
					display(file, "if (this->id == *(short *)(x76_focusedLoadedActor->unk0x10c)) {",[])
					display(file, "FUN_80679200(x76_focusedLoadedActor,0,8,0)",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "}",[])
					display(file, "x76_counter = x76_counter + 1",[])
					display(file, "x76_focusedLoadedActorSlot = x76_focusedLoadedActorSlot + 8",[])
					display(file, "} while (x76_counter < loadedActorCount)",[])
					display(file, "}",[])
					break;
				case 0x77:
					display(file, "FUN_80650794(this->id,%s,%s,%s)", [str(params[0]), str(params[1] & 0xFF), str(params[2] / 1000)])
					break;
				case 0x78:
					display(file, "FUN_806335B0(this->id,1,%s)", [str(params[0])])
					display(file, "PlayerPointer->unk0x3A4 = uStack40",[])
					display(file, "PlayerPointer->unk0x3A8 = uStack44",[])
					display(file, "PlayerPointer->unk0x3AC = uStack48",[])
					break;
				case 0x79:
					display(file, "setFlag(%s>%s,%s,'Temporary')", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), getTOrF(params[1])])
					break;
				case 0x7A:
					display(file, "FUN_80661264(%s,%s)", [str(params[0] & 0xFF), str(params[0] & 0xFF)])
					break;
				case 0x7B:
					display(file, "FUN_806335B0(this->id,%s)", [str(params[1])])
					display(file, "FUN_8072ECFC(%s)", [str(params[0])])
					break;
				case 0x7C:
					display(file, "BYTE_80748094 = %s", [str(params[0])])
					break;
				case 0x7D:
					display(file, "if (*(short *)(behaviour + %s) < 0) {", [hex((2 * params[1]) + 0x10)])
					display(file, "*(short *)(behaviour + %s) = FUN_80605044(this->id,%s,%s,%s)", [hex((2 * params[1]) + 0x10), str(params[0]), str(params[2] & 0x7F), str(params[1] & 2)])
					display(file, "}",[])
					break;
				case 0x7E:
					x7e_ivar5 = params[1]
					if (params[1] < 0) {
						x7e_ivar5 = x7e_ivar5 + 0x7F
					}
					x7e_uvar9 = (x7e_ivar5 >> 7) & 0xFF
					x7e_ivar5 = params[2]
					if (params[2] < 0) {
						x7e_ivar5 = x7e_ivar5 + 0x7F
					}
					x7e_uvar14 = (x7e_ivar5 >> 7) & 0xFF
					x7e_bvar15 = x7e_uvar14
					if (x7e_uvar9 == 0) {
						x7e_uvar9 = 0x7F
					}
					if (x7e_uvar14 == 0) {
						x7e_bvar15 = 0xFF
					}
					display(file, "if (BYTE_80748094 < 1) {",[])
					display(file, "playSFX(%s,0x7FFF,0x427C0000,%s)", [str(params[0]), str(x7e_uvar9/127)])
					display(file, "}",[])
					display(file, "else {",[])
					display(file, "FUN_806335B0(this->id,1,BYTE_80748094)",[])
					display(file, "FUN_806086CC(%s,%s,%s,%s,0.3,0)", [str(x7e_bvar15), str(x7e_uvar9), str(params[1] & 0x7F), str(params[2] & 0x7F)])
					display(file, "}",[])
					break;
				case 0x7F:
					if (params[1] == 0) {
						x7f_temp = 0
					} else if (params[1] == 1) {
						x7f_temp = 1
					} else if (params[1] == 2) {
						x7f_temp = 2
					} else if (params[1] == 3) {
						x7f_temp = 3
					} else {
						x7f_temp = 0
					}
					display(file, "FUN_8072EE0C(this->id,%s,%s)", [str(params[0]),str(x7f_temp)])
					break;
				case 0x80:
					display(file, "save()")
					break;
				case 0x81:
					display(file, "BYTE_807F693E = BYTE_807F693E | (1 << %s)", [str(params[0])])
					break;
				case 0x82:
					display(file, "BYTE_807F693E = BYTE_807F693E & ~(1 << %s)", [str(params[0])])
					break;
				case 0x83:
					_item = "Unknown " + hex(params[0])
					if (hud_items.indexOf(params[0]) > -1) {
						_item = hud_items[params[0]]
					}
					display(file, "setHUDItemAsInfinite(%s,%s,%s)", [_item, str(params[1]), getTOrF(params[2])])
					break;
				case 0x84:
					display(file, "setFlag(%s>%s,%s,'Global')", [hex(Math.floor(params[0] / 8)), str(params[0] % 8), getTOrF(params[1])])
					break;
				case 0x85:
					display(file, "FUN_8062D1A8()",[])
					break;
				case 0x86:
					display(file, "FUN_806CF398(PlayerPointer)",[])
					display(file, "InitMapChange_TransferredActor(0x2A,0,%s,2)", [str(params[0])])
					break;
				case 0x87:
					display(file, "warpOutOfBonusGame()",[])
					break;
				case 0x88:
					display(file, "DWORD_807FBB68 = DWORD_807FBB68 | %s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x89:
					display(file, "DWORD_807FBB68 = DWORD_807FBB68 & ~%s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x8A:
					display(file, "FUN_806417BC(%s,%s)", [str(params[0]), str(params[1])])
					break;
				case 0x8B:
					display(file, "*(uint *)(PlayerPointer->unk0x36C) = *(uint *)(PlayerPointer->unk0x36C) & ~%s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x8C:
					display(file, "*(uint *)(PlayerPointer->unk0x36C) = *(uint *)(PlayerPointer->unk0x36C) | %s", [hex((params[0] * 0x10000) + params[1])])
					break;
				case 0x8D:
					display(file, "next_transition_type = 'Fade'",[])
					display(file, "FUN_806CF398(PlayerPointer)",[])
					display(file, "x8d_uvar5 = getWorld(CurrentMap,0)",[])
					display(file, "x8d_ivar6 = isLobby(CurrentMap)",[])
					display(file, "x8d_ivar7 = x8d_uvar5",[])
					display(file, "if (x8d_ivar6 == 0) {",[])
					display(file, "warpOutOfLevel(x8d_ivar7)",[])
					display(file, "}",[])
					display(file, "else {",[])
					display(file, "x8d_svar12 = *(short *)(&DAT_8074809C + (x8d_ivar7 * 2))",[])
					display(file, "x8d_dstack88 = (short)(&WORD_807480AC)[x8d_ivar7]",[])
					display(file, "x8d_uvar9 = isFlagSet(*(short *)(&DAT_807480BC + (x8d_ivar7 * 2)),'Permanent')",[])
					display(file, "if ((x8d_uvar9 == 0) && (x8d_svar12 == 0x57)) {",[])
					display(file, "x8d_dstack88 = 0x15",[])
					display(file, "}",[])
					display(file, "x8d_ivar6 = DetermineLevel_NewLevel()",[])
					display(file, "if (x8d_ivar6 == 0) {",[])
					display(file, "InitMapChange(x8d_svar12,x8d_dstack88)",[])
					display(file, "}",[])
					break;
				case 0x8E:
					display(file, "FUN_8066C904(&ObjectModel2ArrayPointer[id2index(this->id)]->unk0x28)",[])
					break;
				case 0x8F:
					display(file, "FUN_806348B4(&ObjectModel2ArrayPointer[id2index(this->id)]->unk0x48)",[])
					break;
				case 0x90:
					display(file, "BYTE_807F6902 = %s", [str(params[0])])
					break;
				case 0x91:
					display(file, "*(float *)(PlayerPointer->velocity) = %s", [str(params[0])])
					break;
				case 0x92:
					display(file, "*(uint *)(PlayerPointer->unk0x368) = *(uint *)(PlayerPointer->unk0x368) | 0x40000800",[])
					break;
				case 0x93:
					display(file, "FUN_8061F510(%s,%s)", [str(params[0] & 0xFF),str(params[1] & 0xFF)])
					break;
				case 0x94:
					display(file, "FUN_80724994(2,%s,0,0)", [str(params[0])])
					break;
				case 0x95:
					display(file, "WORD_807F693C = 0x80",[])
					break;
				case 0x96:
					display(file, "BYTE_807F6903 = %s", [str(params[0])])
					break;
				default:
					display(file, "[%s,%s,%s,%s]", [str(functionType),str(params[0]), str(params[1]), str(params[2])])
					break;
			}
		}

		function arrToInt(arr) {
			total = 0
			arr.forEach(item=> {
				total = (total * 256) + item
			})
			return total
		}

		function grabAddress(addr) {
			size = 4
			bytes = file_bytes.filter((item,index) => {
				if ((index >= addr) && (index < (addr + size))) {
					return true;
				}
				return false;
			})
			return arrToInt(bytes) + main_pointer_table_offset
		}

		function grab_bytes(start,finish) {
			return file_bytes.filter((item,index) => {
				if ((index >= start) && (index < finish)) {
					return true;
				}
				return false;
			})
		}

		function readData(bytes,size,start) {
			return arrToInt(bytes.filter((item,index) => {
				if ((index >= start) && (index < (start + size))) {
					return true
				}
				return false;
			}))
		}
		var scripts = [];
		function parseFile() {
			viewed_file = -1;
			data = file_bytes.slice()
			read_location = 0;
			script_count = readData(data,2,read_location);
			scripts = [];
			if (script_count > 0) {
				console.log(script_count + " scripts found")
				read_location += 2;
				for (let script_index = 0; script_index < script_count; script_index++) {
					object_id = readData(data,2,read_location);

					block_count = readData(data,2,read_location + 2);
					behav_9C = readData(data,2,read_location + 4);
					read_location += 6;

					script_lines = [];
					for (let y = 0; y < block_count; y++) {
						conditional_count = readData(data,2,read_location);
						read_location += 2;
						x = {};
						if (conditional_count > 0) {
							for (let z = 0; z <conditional_count; z++) {
								func = readData(data,2,read_location)
								read_location += 2;
								p = []
								for (let a = 0; a < 3; a++) {
									p.push(readData(data,2,read_location))
									read_location += 2;
								}
								script_lines.push({
									"type": "condition",
									"func": func,
									"params": p.slice(),
								})
							}
						}
						execution_count = readData(data,2,read_location);
						read_location += 2;
						if (execution_count > 0) {
							for (let z = 0; z < execution_count; z++) {
								func = readData(data,2,read_location)
								read_location += 2;
								p = []
								for (let a = 0; a < 3; a++) {
									p.push(readData(data,2,read_location))
									read_location += 2;
								}
								script_lines.push({
									"type": "execution",
									"func": func,
									"params": p.slice(),
								})
							}
						}
						script_lines.push({
							"type": "endblock",
						})
					}
					scripts.push({
						"id": object_id,
						"script": script_lines.slice(),
						"behav_9C": behav_9C,
					})
				}
			}
			return scripts.slice()
		}
	</script>
</body>
</html>